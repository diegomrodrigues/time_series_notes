## Avalia√ß√£o da Precis√£o da Previs√£o em Modelos de S√©ries Temporais

### Introdu√ß√£o
Expandindo os conceitos previamente introduzidos sobre modelagem de s√©ries temporais e t√©cnicas de previs√£o [^5], este cap√≠tulo aprofunda-se na avalia√ß√£o da precis√£o das previs√µes geradas. Conforme discutido anteriormente, a modelagem de s√©ries temporais envolve a an√°lise de dados sequenciais ao longo do tempo para prever valores futuros [^5]. Dada a natureza inerentemente imperfeita das previs√µes, √© essencial entender e quantificar a diferen√ßa entre os valores previstos e os valores reais. Este cap√≠tulo ir√° desenvolver o conceito de precis√£o da previs√£o, introduzindo e analisando m√©tricas comuns utilizadas para quantificar os erros de previs√£o, incluindo o Desvio Absoluto M√©dio (MAD), o Erro Quadr√°tico M√©dio (MSE) e o Erro Percentual Absoluto M√©dio (MAPE) e o MASE (Erro M√©dio Absoluto Escalonado). Al√©m disso, vamos explorar a import√¢ncia de selecionar a m√©trica de erro mais adequada para cada contexto, bem como outras medidas como o RMSE (Raiz do Erro Quadr√°tico M√©dio).

### Conceitos Fundamentais
A precis√£o da previs√£o √© um componente cr√≠tico da an√°lise de s√©ries temporais, uma vez que fornece insights sobre a efic√°cia de um determinado modelo [^10]. O erro de previs√£o, definido como a diferen√ßa entre a demanda real e a previs√£o [^9], √© um conceito fundamental para avaliar o desempenho do modelo. Matematicamente, o erro de previs√£o √© representado pela seguinte equa√ß√£o:

$$ \text{Erro de Previs√£o} = \text{Demanda Real} - \text{Previs√£o} $$ [^9]

Como as previs√µes s√£o feitas para o futuro, n√£o √© poss√≠vel compar√°-las diretamente com dados reais no momento da previs√£o. Em vez disso, avaliamos a qualidade da abordagem de previs√£o no passado, com base em dados hist√≥ricos, usando o m√©todo de *‚Äúforecasts of the past‚Äù* [^10].

#### M√©tricas de Erro de Previs√£o
Diversas m√©tricas s√£o usadas para avaliar a precis√£o da previs√£o, incluindo [^10]:

1.  **Desvio Absoluto M√©dio (MAD):** O MAD √© a m√©dia dos valores absolutos dos erros de previs√£o e fornece uma medida da magnitude dos erros de previs√£o, sem considerar a sua dire√ß√£o [^10]. A f√≥rmula do MAD √© dada por:

    $$ \text{MAD} = \frac{\sum |\text{Demanda Real} - \text{Previs√£o}|}{n} $$ [^10]

    onde *n* representa o n√∫mero de per√≠odos inclu√≠dos no c√°lculo [^10]. Um MAD de 218,43 significa, por exemplo, que as previs√µes geradas usando SMA (com *n* = 5) desviam, em m√©dia, 218,43 unidades, para mais ou para menos, dos valores reais [^10].

     > üí° **Exemplo Num√©rico:** Usando uma s√©rie temporal de demanda e suas respectivas previs√µes, o MAD √© calculado da seguinte forma.
     >
     > | Per√≠odo | Demanda Real ($y_t$) | Previs√£o ($\hat{y}_t$) |
     > |---|---|---|
     > | 1 | 100 | 110 |
     > | 2 | 120 | 115 |
     > | 3 | 130 | 125 |
     > | 4 | 150 | 140 |
     > | 5 | 160 | 155 |
     >
     > $\text{Step 1: Calcular os erros absolutos: }$
     >
     > $|100-110| = 10$
     > $|120-115| = 5$
     > $|130-125| = 5$
     > $|150-140| = 10$
     > $|160-155| = 5$
     >
     > $\text{Step 2: Calcular a m√©dia dos erros absolutos: }$
     >
     > $\text{MAD} = \frac{10 + 5 + 5 + 10 + 5}{5} = \frac{35}{5} = 7$
     >
     > Isso significa que, em m√©dia, as previs√µes est√£o a 7 unidades da demanda real.

2.  **Erro Quadr√°tico M√©dio (MSE):** O MSE √© a m√©dia dos quadrados dos erros de previs√£o. Ao elevar ao quadrado os erros, o MSE penaliza erros maiores de forma mais significativa do que os erros menores [^12]. A f√≥rmula do MSE √©:

    $$ \text{MSE} = \frac{\sum (\text{Demanda Real} - \text{Previs√£o})^2}{n} $$ [^12]

     O MSE, ao elevar os erros ao quadrado, aumenta a penaliza√ß√£o para erros maiores [^12].

      > üí° **Exemplo Num√©rico:** Usando os mesmos dados do exemplo anterior, o MSE √© calculado da seguinte forma:
      >
      > $\text{Step 1: Calcular os erros ao quadrado: }$
      >
      > $(100-110)^2 = (-10)^2 = 100$
      > $(120-115)^2 = (5)^2 = 25$
      > $(130-125)^2 = (5)^2 = 25$
      > $(150-140)^2 = (10)^2 = 100$
      > $(160-155)^2 = (5)^2 = 25$
      >
      > $\text{Step 2: Calcular a m√©dia dos erros ao quadrado: }$
      >
      > $\text{MSE} = \frac{100 + 25 + 25 + 100 + 25}{5} = \frac{275}{5} = 55$
      >
      > O MSE √© 55, o que reflete a penaliza√ß√£o de erros maiores em compara√ß√£o com o MAD, que era 7.
   
   **2.1 Raiz do Erro Quadr√°tico M√©dio (RMSE):**  O RMSE √© a raiz quadrada do MSE. Esta m√©trica √© particularmente √∫til porque retorna o erro na mesma unidade dos dados originais, facilitando a interpreta√ß√£o. √â dada pela seguinte f√≥rmula:
   
      $$ \text{RMSE} = \sqrt{\frac{\sum (\text{Demanda Real} - \text{Previs√£o})^2}{n}} $$
      
      
   
      **Prova do RMSE:**
      
      Provaremos que o RMSE √© a raiz quadrada do MSE:
      
      I. O MSE √© definido como:
      $$ \text{MSE} = \frac{\sum (\text{Demanda Real} - \text{Previs√£o})^2}{n} $$
      
      II. O RMSE √© definido como a raiz quadrada do MSE, ou seja:
      $$ \text{RMSE} = \sqrt{\text{MSE}} $$
      
      III. Substituindo a defini√ß√£o de MSE na equa√ß√£o do RMSE, temos:
      $$ \text{RMSE} = \sqrt{\frac{\sum (\text{Demanda Real} - \text{Previs√£o})^2}{n}} $$
      
      IV. Portanto, o RMSE √© a raiz quadrada da m√©dia dos erros ao quadrado. ‚ñ†
   
     > üí° **Exemplo Num√©rico:** Usando o resultado do MSE calculado anteriormente, o RMSE √©:
     >
     > $\text{RMSE} = \sqrt{55} \approx 7.42$
     >
     > O RMSE √© de aproximadamente 7.42, que est√° na mesma unidade dos dados, facilitando sua interpreta√ß√£o.
     
     > üí° **Exemplo Num√©rico com Compara√ß√£o:** Suponha que temos duas s√©ries temporais diferentes, e queremos comparar o desempenho de um modelo nelas. Na s√©rie 1, o MSE √© 100 e na s√©rie 2 o MSE √© 25. O RMSE para a s√©rie 1 √© $\sqrt{100} = 10$ e para a s√©rie 2 √© $\sqrt{25} = 5$. O RMSE permite comparar os erros na mesma escala, enquanto comparar os valores do MSE sem levar em considera√ß√£o a escala dos dados originais pode ser enganoso.

3.  **Erro M√©dio Percentual Absoluto (MAPE):** O MAPE expressa o erro como uma porcentagem da demanda real, contornando a depend√™ncia do volume observada no MAD e no MSE [^12]. A f√≥rmula do MAPE √© dada por:

    $$ \text{MAPE} = \frac{\sum \left|\frac{\text{Demanda Real} - \text{Previs√£o}}{\text{Demanda Real}}\right|}{n} \times 100 $$ [^12]
   
   Um MAPE de 13,19%, por exemplo, indica que as previs√µes geradas pelo modelo de suaviza√ß√£o exponencial com $\alpha$ = 0,4 desviam, em m√©dia, 13,19% da demanda real [^12].
   
     > üí° **Exemplo Num√©rico:** Utilizando novamente os mesmos dados, o MAPE √© calculado como:
     >
     > $\text{Step 1: Calcular os erros percentuais absolutos: }$
     >
     > $|\frac{100-110}{100}| = |-\frac{10}{100}| = 0.10$
     > $|\frac{120-115}{120}| = |\frac{5}{120}| = 0.0417$
     > $|\frac{130-125}{130}| = |\frac{5}{130}| = 0.0385$
     > $|\frac{150-140}{150}| = |\frac{10}{150}| = 0.0667$
     > $|\frac{160-155}{160}| = |\frac{5}{160}| = 0.0313$
     >
     > $\text{Step 2: Calcular a m√©dia dos erros percentuais absolutos e multiplicar por 100: }$
     >
     > $\text{MAPE} = \frac{0.10 + 0.0417 + 0.0385 + 0.0667 + 0.0313}{5} \times 100 = \frac{0.2782}{5} \times 100 = 0.05564 \times 100 = 5.564\%$
     >
     > O MAPE √© de aproximadamente 5.564%, indicando que, em m√©dia, as previs√µes est√£o cerca de 5.564% da demanda real.

4.  **Erro M√©dio Absoluto Escalonado (MASE):** O MASE √© uma m√©trica utilizada para comparar o desempenho de um modelo preditivo com o desempenho de um modelo *na√Øve*, resolvendo as limita√ß√µes do MAPE em rela√ß√£o a demandas pr√≥ximas a zero. O MASE √© dado por:

    $$ \text{MASE} = \frac{\frac{1}{n} \sum_{t=1}^{n} |y_t - \hat{y}_t|}{\frac{1}{n-1}\sum_{t=2}^{n}|y_t - y_{t-1}|} $$

      onde $y_t$ representa a demanda real no per√≠odo *t*, $\hat{y}_t$ √© a previs√£o para o per√≠odo *t* e *n* √© o n√∫mero de per√≠odos considerados. O denominador representa a m√©dia da diferen√ßa absoluta entre valores consecutivos na s√©rie temporal, enquanto o numerador representa o MAD do modelo avaliado. Um MASE menor que 1 indica um modelo mais preciso do que o modelo *na√Øve*.
    
     > üí° **Exemplo Num√©rico:** Utilizando novamente os mesmos dados, e adicionando um valor anterior para calcular o denominador do MASE, temos:
    >
    > | Per√≠odo | Demanda Real ($y_t$) | Previs√£o ($\hat{y}_t$) |
    > |---|---|---|
    > | 0 | 90| - |
    > | 1 | 100 | 110 |
    > | 2 | 120 | 115 |
    > | 3 | 130 | 125 |
    > | 4 | 150 | 140 |
    > | 5 | 160 | 155 |
    >
    >
    > $\text{Step 1: Calcular o numerador (MAD do modelo): }$
    >
    > J√° calculamos o MAD no primeiro exemplo, que √© 7. Logo, o numerador √© igual a 7.
    >
    > $\text{Step 2: Calcular o denominador (MAD do modelo naive): }$
    >
    > $|100-90| = 10$
    > $|120-100| = 20$
    > $|130-120| = 10$
    > $|150-130| = 20$
    > $|160-150| = 10$
    >
    > $\text{Denominador} = \frac{10 + 20 + 10 + 20 + 10}{5-1} = \frac{70}{4} = 17.5$
    >
    > $\text{Step 3: Calcular o MASE: }$
    >
    > $\text{MASE} = \frac{7}{17.5} \approx 0.4$
    >
    > Como o MASE √© menor que 1, nosso modelo √© mais preciso do que o modelo *naive*.
    >
    > üí° **Exemplo Num√©rico com Varia√ß√£o:**
    >
    > Vamos analisar um cen√°rio onde os erros t√™m diferentes magnitudes e o MASE √© √∫til:
    >
    > | Per√≠odo | Demanda Real ($y_t$) | Previs√£o ($\hat{y}_t$) |
    > |---|---|---|
    > | 0 | 10 | - |
    > | 1 | 12 | 14 |
    > | 2 | 15 | 16 |
    > | 3 | 18 | 17 |
    > | 4 | 20 | 21 |
    > | 5 | 22 | 23 |
    >
    > Numerador (MAD):
    >
    > $\frac{|12-14|+|15-16|+|18-17|+|20-21|+|22-23|}{5} = \frac{2+1+1+1+1}{5} = \frac{6}{5} = 1.2$
    >
    > Denominador (MAD do Naive):
    >
    > $\frac{|12-10|+|15-12|+|18-15|+|20-18|+|22-20|}{5-1} = \frac{2+3+3+2+2}{4} = \frac{12}{4} = 3$
    >
    > $\text{MASE} = \frac{1.2}{3} = 0.4$
    >
    >  Nesse caso, o modelo √© melhor que o *naive*.

#### Escolha do Valor de $\alpha$ em Suaviza√ß√£o Exponencial
No contexto da suaviza√ß√£o exponencial, a escolha do valor de  $\alpha$ desempenha um papel crucial na precis√£o da previs√£o. Um valor mais baixo de $\alpha$ torna o modelo mais est√°vel, minimizando a influ√™ncia de flutua√ß√µes de curto prazo. Em contraste, um valor mais alto de $\alpha$ aumenta a capacidade do modelo de responder a mudan√ßas recentes na demanda [^9].

#### Ajuste de Tend√™ncia e Sazonalidade
Modelos como a suaviza√ß√£o exponencial podem n√£o ser adequados quando existem tend√™ncias ou padr√µes sazonais nos dados. Para tratar a tend√™ncia, o m√©todo de suaviza√ß√£o exponencial com ajuste de tend√™ncia (TAES) usa um segundo fator de suaviza√ß√£o $\beta$ [^15]. Para ajustar a sazonalidade, √≠ndices sazonais s√£o frequentemente utilizados para modificar a previs√£o geral [^19].  A decomposi√ß√£o de s√©ries temporais usando modelos de regress√£o de m√≠nimos quadrados tamb√©m √© √∫til para contabilizar tend√™ncias e sazonalidade [^19].

#### Escolhendo o Melhor Modelo
A sele√ß√£o do modelo de previs√£o apropriado depende da precis√£o requerida. O MAPE confirma que modelos com maior capacidade de resposta (como WMA com pesos 0,7 e 0,3 e suaviza√ß√£o exponencial com $\alpha$ = 0,8) oferecem maior precis√£o para os dados hist√≥ricos em quest√£o [^12].
Um modelo com um MAD baixo implica que, em m√©dia, as previs√µes est√£o mais pr√≥ximas da demanda real, enquanto um modelo com MSE baixo penaliza mais os erros maiores [^10, 12]. √â importante reconhecer que a precis√£o dos m√©todos de previs√£o varia, dependendo do contexto espec√≠fico [^23]. A escolha da m√©trica de erro apropriada depende do objetivo da an√°lise, sendo MAD uma escolha adequada para entender a magnitude dos erros na unidade da vari√°vel, MSE quando penalizar erros maiores for mais importante, MAPE para expressar o erro em termos percentuais, e MASE quando a demanda pode ser pr√≥xima a zero [^10, 12]. Adicionalmente, o RMSE √© √∫til quando desejamos avaliar o erro na unidade original dos dados, mantendo a penaliza√ß√£o de grandes erros do MSE.

> üí° **Exemplo Comparativo:** Para demonstrar a import√¢ncia de escolher a m√©trica apropriada, vamos comparar os erros de dois modelos preditivos utilizando os mesmos dados:
>
> | Modelo | MAD | MSE | RMSE | MAPE (%) | MASE |
> |---|---|---|---|---|---|
> | Modelo 1 | 7 | 55 | 7.42 | 5.56 | 0.4 |
> | Modelo 2 | 10 | 120 | 10.95| 7.00 | 0.6 |
>
> O Modelo 1 tem o menor MAD, indicando que suas previs√µes, em m√©dia, est√£o mais pr√≥ximas dos valores reais do que as do Modelo 2. O Modelo 1 tamb√©m apresenta um MSE menor, implicando que ele penaliza menos os erros maiores em compara√ß√£o com o Modelo 2. Al√©m disso, o Modelo 1 apresenta um MAPE menor, evidenciando que o erro percentual relacionado √† demanda √© menor do que no Modelo 2. O Modelo 1 tamb√©m tem um MASE menor do que o Modelo 2, indicando que performa melhor do que o modelo *naive*. E o Modelo 1 tem o menor RMSE, indicando um menor erro em termos absolutos, levando em conta o aumento do erro para erros maiores. Neste caso, todas as m√©tricas convergem para o mesmo resultado: o Modelo 1 √© mais preciso do que o Modelo 2 para estes dados.
>
> A sele√ß√£o da m√©trica deve estar alinhada com os objetivos particulares da an√°lise. Se o principal objetivo for minimizar a magnitude m√©dia do erro, o MAD √© uma m√©trica apropriada. Se a prioridade for minimizar grandes erros, o MSE ou RMSE s√£o mais apropriados. E se for necess√°rio expressar o erro em termos percentuais, o MAPE ou MASE s√£o adequados. Se houver riscos de a demanda ser igual a zero, o MASE deve ser priorizado.

### Conclus√£o
A precis√£o da previs√£o √© um elemento crucial da an√°lise de s√©ries temporais. Este cap√≠tulo destacou a import√¢ncia de quantificar o erro de previs√£o e apresentou m√©tricas de avalia√ß√£o como MAD, MSE, RMSE, MAPE e MASE [^10]. Foi discutido tamb√©m como ajustar previs√µes para tend√™ncias e sazonalidade [^15, 19]. A capacidade de comparar a precis√£o de diferentes modelos √© fundamental para a tomada de decis√µes gerenciais, levando √† sele√ß√£o da abordagem mais adequada [^23]. Em √∫ltima an√°lise, a capacidade de prever com precis√£o a demanda futura √© essencial para o planejamento ideal e a aloca√ß√£o de recursos [^23]. A escolha da m√©trica de erro correta √© crucial para uma avalia√ß√£o precisa da efic√°cia da previs√£o, dependendo do contexto espec√≠fico e dos objetivos da an√°lise.

### Refer√™ncias
[^5]: *Time series models assume that past demand data are representative of future demand.*
[^9]: *Forecast error = Actual demand - Forecast.*
[^10]: *Because a forecast predicts future demand, we cannot compare it to actual demand. However, because we have assumed that historical demand is representative of future demand, we can formulate "forecasts of the past" using a particular model and compare those forecasts to historical demand.*
[^12]: *With both the MAD and MSE, the size of the deviations depends on the volume of the item being forecast. For example, if the demand is in thousands of units, the absolute and squared deviations could be quite large. The mean absolute percentage error (MAPE) remedies this problem by expressing the deviation as a percentage of the actual demand.*
[^15]: *Exponential smoothing (ES) is one of the most popular forecasting techniques. It is similar to a WMA technique in the sense that it assigns (a) a weight between 0 and 1 (called the "smoothing constant"), a, to the actual demand in the previous period and (b) a weight (1 ‚Äì a) to the exponential smoothing forecast for the previous period*
[^19]: *In a time series, seasonality is expressed as the amount of deviation between the actual demand values and the average value of the series.*
[^23]: *Forecasting demand is important to be able to plan and allocate the resources necessary to provide uninterrupted, quality customer service and avoid the excess costs arising from mismatched demand and supply.*
<!-- END -->
