## Desvio Absoluto M√©dio (MAD) na Avalia√ß√£o de Previs√µes em S√©ries Temporais

### Introdu√ß√£o
Em continuidade √† nossa discuss√£o sobre modelagem de s√©ries temporais e avalia√ß√£o da precis√£o da previs√£o, este cap√≠tulo se aprofunda no Desvio Absoluto M√©dio (MAD), uma m√©trica fundamental para quantificar a magnitude dos erros de previs√£o [^10]. Como exploramos nos cap√≠tulos anteriores, modelos de s√©ries temporais s√£o usados para analisar dados sequenciais ao longo do tempo para prever valores futuros [^5]. Dada a natureza inerentemente imperfeita das previs√µes, √© essencial quantificar a diferen√ßa entre valores previstos e valores reais. O MAD oferece uma abordagem direta para medir a magnitude desses erros, auxiliando na avalia√ß√£o da precis√£o do modelo [^10]. Esta se√ß√£o tem como objetivo analisar em profundidade a m√©trica MAD, suas propriedades, como calcular e interpretar os resultados obtidos.

### Conceitos Fundamentais
O Desvio Absoluto M√©dio (MAD) √© uma m√©trica utilizada para avaliar a precis√£o de previs√µes em s√©ries temporais [^10]. Ele representa a m√©dia dos valores absolutos dos erros de previs√£o, onde o erro de previs√£o √© definido como a diferen√ßa entre a demanda real e a previs√£o [^9]. O MAD fornece uma medida direta da magnitude m√©dia dos erros, sem considerar sua dire√ß√£o (positivo ou negativo), sendo √∫til quando se deseja avaliar a magnitude geral dos erros de previs√£o em termos absolutos [^10]. Matematicamente, o MAD √© expresso como:

$$ \text{MAD} = \frac{\sum |\text{Demanda Real} - \text{Previs√£o}|}{n} $$ [^10]

Onde:
-  $\text{Demanda Real}$ √© o valor real da s√©rie temporal no per√≠odo considerado;
- $\text{Previs√£o}$ √© o valor previsto para o mesmo per√≠odo pelo modelo;
- $\sum$ denota a soma dos valores absolutos das diferen√ßas entre a demanda real e a previs√£o em todos os per√≠odos considerados;
-  $n$ √© o n√∫mero de per√≠odos inclu√≠dos no c√°lculo.

√â importante notar que a precis√£o da previs√£o √© avaliada utilizando dados hist√≥ricos, ou *‚Äúforecasts of the past‚Äù*, onde a previs√£o √© comparada com a demanda real para os mesmos per√≠odos no passado, para determinar a qualidade da abordagem de previs√£o [^10].

**Proposi√ß√£o 2.1:** O MAD √© equivalente √† norma-1 do vetor de erros de previs√£o dividido pelo n√∫mero de per√≠odos.

**Prova:**
I. O erro de previs√£o no per√≠odo t, denotado por $e_t$, √© dado por: $e_t = \text{Demanda Real}_t - \text{Previs√£o}_t$.
II. O valor absoluto do erro de previs√£o √© dado por: $|e_t| = |\text{Demanda Real}_t - \text{Previs√£o}_t|$.
III. A soma dos valores absolutos dos erros de previs√£o √©:  $\sum |e_t| = \sum |\text{Demanda Real}_t - \text{Previs√£o}_t|$.
IV. O MAD √© definido como a m√©dia desses valores absolutos: $\text{MAD} = \frac{\sum |e_t|}{n} = \frac{\sum |\text{Demanda Real} - \text{Previs√£o}|}{n}$.
V.  A norma-1 de um vetor $\mathbf{e} = [e_1, e_2,\ldots,e_n]$ √© definida como: $||\mathbf{e}||_1 = \sum_{t=1}^n |e_t|$.
VI. Portanto, o MAD pode ser expresso como: $\text{MAD} = \frac{||\mathbf{e}||_1}{n}$, demonstrando que √© equivalente √† norma-1 do vetor de erros de previs√£o dividido pelo n√∫mero de per√≠odos. $\blacksquare$

**Observa√ß√£o 2.1:** A Proposi√ß√£o 2.1 revela uma conex√£o direta entre o MAD e a norma-1, o que implica que o MAD minimiza a soma dos erros absolutos. Essa caracter√≠stica o torna uma m√©trica adequada quando se deseja penalizar erros de maneira linear, sem enfatizar erros maiores como ocorre com o MSE.

#### Interpreta√ß√£o do MAD
Um valor menor de MAD indica que as previs√µes, em m√©dia, est√£o mais pr√≥ximas dos valores reais, sugerindo maior precis√£o do modelo. Por outro lado, um valor de MAD mais alto indica que as previs√µes, em m√©dia, est√£o mais distantes dos valores reais, sugerindo menor precis√£o [^10]. √â crucial notar que o MAD n√£o indica a dire√ß√£o do erro, ou seja, se a previs√£o est√° subestimando ou superestimando a demanda real. O MAD √© expresso na mesma unidade da demanda original, tornando sua interpreta√ß√£o intuitiva e direta.

#### C√°lculo do MAD
Para calcular o MAD, √© necess√°rio:
1. Calcular o erro de previs√£o para cada per√≠odo: Subtrair a previs√£o da demanda real para cada per√≠odo da s√©rie temporal.
2. Calcular o valor absoluto de cada erro: Tomar o valor absoluto de cada erro de previs√£o para que todos os erros sejam positivos.
3. Calcular a m√©dia desses valores absolutos: Somar todos os valores absolutos e dividir pelo n√∫mero total de per√≠odos considerados.
√â importante destacar que o c√°lculo do MAD √© direto e simples, o que torna essa m√©trica popular para avalia√ß√£o da precis√£o da previs√£o [^10].

> üí° **Exemplo Num√©rico:**
> Considere uma s√©rie temporal de demanda e suas respectivas previs√µes:
>
> | Per√≠odo | Demanda Real ($y_t$) | Previs√£o ($\hat{y}_t$) |
> |---|---|---|
> | 1 | 100 | 110 |
> | 2 | 120 | 115 |
> | 3 | 130 | 125 |
> | 4 | 150 | 140 |
> | 5 | 160 | 155 |
>
> $\text{Step 1: Calcular os erros de previs√£o: }$
>
> $100-110 = -10$
> $120-115 = 5$
> $130-125 = 5$
> $150-140 = 10$
> $160-155 = 5$
>
> $\text{Step 2: Calcular os valores absolutos dos erros: }$
>
> $|-10| = 10$
> $|5| = 5$
> $|5| = 5$
> $|10| = 10$
> $|5| = 5$
>
> $\text{Step 3: Calcular a m√©dia dos valores absolutos dos erros: }$
>
> $\text{MAD} = \frac{10 + 5 + 5 + 10 + 5}{5} = \frac{35}{5} = 7$
>
> Isso significa que, em m√©dia, as previs√µes est√£o a 7 unidades da demanda real.

> üí° **Exemplo Num√©rico:**
> Suponha que estejamos analisando a demanda di√°ria de um produto em um pequeno varejo. As vendas reais nos √∫ltimos 7 dias e as previs√µes do modelo s√£o dadas na tabela abaixo:
>
> | Dia | Demanda Real | Previs√£o |
> |-----|--------------|----------|
> | 1   | 25           | 28       |
> | 2   | 30           | 27       |
> | 3   | 22           | 24       |
> | 4   | 28           | 31       |
> | 5   | 35           | 32       |
> | 6   | 29           | 26       |
> | 7   | 32           | 30       |
>
> $\text{Step 1: Calcular os erros de previs√£o: }$
>
> $25-28 = -3$
> $30-27 = 3$
> $22-24 = -2$
> $28-31 = -3$
> $35-32 = 3$
> $29-26 = 3$
> $32-30 = 2$
>
> $\text{Step 2: Calcular os valores absolutos dos erros: }$
>
> $|-3| = 3$
> $|3| = 3$
> $|-2| = 2$
> $|-3| = 3$
> $|3| = 3$
> $|3| = 3$
> $|2| = 2$
>
> $\text{Step 3: Calcular a m√©dia dos valores absolutos dos erros: }$
>
> $\text{MAD} = \frac{3 + 3 + 2 + 3 + 3 + 3 + 2}{7} = \frac{19}{7} \approx 2.71$
>
> O valor de MAD de 2.71 indica que, em m√©dia, as previs√µes do modelo est√£o errando em cerca de 2.71 unidades para mais ou para menos em rela√ß√£o √† demanda real.

#### Compara√ß√£o com outras m√©tricas de erro
Enquanto o MAD fornece uma medida direta da magnitude do erro, outras m√©tricas como o Erro Quadr√°tico M√©dio (MSE) e o Erro Percentual Absoluto M√©dio (MAPE), tamb√©m s√£o utilizadas para avaliar a precis√£o da previs√£o [^10, 12]. O MSE, ao elevar os erros ao quadrado, penaliza mais os erros maiores [^12], o que √© √∫til em situa√ß√µes onde erros grandes s√£o cr√≠ticos. J√° o MAPE expressa o erro como uma porcentagem da demanda real, sendo √∫til quando se deseja avaliar a precis√£o da previs√£o em termos relativos [^12]. A escolha da m√©trica apropriada depende do contexto espec√≠fico, e, como vimos nos cap√≠tulos anteriores, uma an√°lise abrangente deve considerar v√°rias m√©tricas de erro.

> üí° **Exemplo Num√©rico:**
> Vamos comparar o MAD com o MSE para o mesmo conjunto de dados do exemplo anterior:
>
> | Dia | Demanda Real | Previs√£o | Erro (e_t) | |e_t| | e_t¬≤ |
> |-----|--------------|----------|------------|-------|------|
> | 1   | 25           | 28       | -3         | 3     | 9    |
> | 2   | 30           | 27       | 3          | 3     | 9    |
> | 3   | 22           | 24       | -2         | 2     | 4    |
> | 4   | 28           | 31       | -3         | 3     | 9    |
> | 5   | 35           | 32       | 3          | 3     | 9    |
> | 6   | 29           | 26       | 3          | 3     | 9    |
> | 7   | 32           | 30       | 2          | 2     | 4    |
>
> J√° calculamos o MAD como 2.71. Agora, vamos calcular o MSE:
>
> $\text{MSE} = \frac{9 + 9 + 4 + 9 + 9 + 9 + 4}{7} = \frac{53}{7} \approx 7.57$
>
>  A raiz quadrada do MSE (RMSE) √© $\text{RMSE} = \sqrt{7.57} \approx 2.75$.
>
>  Observe que, neste caso, o RMSE √© ligeiramente maior que o MAD, como esperado pelo Teorema 2.1. O MSE pune os erros maiores mais fortemente. Se tiv√©ssemos um erro maior (por exemplo, uma previs√£o de 20 para uma demanda de 35), o MSE aumentaria mais do que o MAD.

**Lema 2.2:** O MAD √© uma m√©trica mais robusta do que o MSE em rela√ß√£o √† presen√ßa de *outliers* (valores discrepantes) no conjunto de dados.

**Prova:**

I. O MAD calcula a m√©dia dos valores absolutos dos erros: $\text{MAD} = \frac{\sum |y_t - \hat{y}_t|}{n}$. Um *outlier* aumenta o valor de um dos termos $|y_t - \hat{y}_t|$ na soma, mas o efeito sobre o MAD √© proporcional √† magnitude desse *outlier*.

II. O MSE calcula a m√©dia dos quadrados dos erros: $\text{MSE} = \frac{\sum (y_t - \hat{y}_t)^2}{n}$. Um *outlier* n√£o apenas aumenta um dos termos $(y_t - \hat{y}_t)^2$ na soma, mas aumenta este termo ao quadrado, amplificando o seu efeito na m√©trica.

III. Como um *outlier* tem um impacto desproporcionalmente maior sobre o MSE em rela√ß√£o ao MAD, o MAD √© mais resistente √† presen√ßa de *outliers* e portanto √© uma m√©trica mais robusta nesse contexto. $\blacksquare$

**Lema 2.3:** Se todos os erros de previs√£o tiverem a mesma magnitude, o MAD e a raiz quadrada do MSE (RMSE) ser√£o proporcionais. Especificamente, $\text{RMSE} = \sqrt{\frac{\sum e_t^2}{n}}$ e, quando $|e_1|=|e_2| = \ldots =|e_n| = k$, ent√£o $\text{RMSE} = k = \text{MAD}$.

**Prova:**

I. Suponha que todos os erros tenham a mesma magnitude: $|e_1| = |e_2| = \ldots = |e_n| = k$, onde $k$ √© uma constante positiva.

II. O MAD √© dado por $\text{MAD} = \frac{\sum |e_t|}{n}$. Como todos os $|e_t|$ s√£o iguais a $k$, temos $\text{MAD} = \frac{\sum k}{n} = \frac{nk}{n} = k$.

III. O RMSE √© dado por $\text{RMSE} = \sqrt{\frac{\sum e_t^2}{n}}$.  Como $|e_t| = k$, temos $e_t^2 = k^2$, logo $\text{RMSE} = \sqrt{\frac{\sum k^2}{n}} = \sqrt{\frac{nk^2}{n}} = \sqrt{k^2} = k$.

IV. Portanto, $\text{MAD} = \text{RMSE} = k$, demonstrando que quando todos os erros t√™m a mesma magnitude, o MAD e o RMSE s√£o iguais. $\blacksquare$

**Teorema 2.1:** O MAD √© sempre menor ou igual ao RMSE.

**Prova:**
I. Pela desigualdade de Cauchy-Schwarz, temos: $(\sum_{i=1}^n a_i b_i)^2 \leq (\sum_{i=1}^n a_i^2)(\sum_{i=1}^n b_i^2)$.
II. Seja $a_i = |e_i|$ e $b_i=1$. Ent√£o $(\sum_{i=1}^n |e_i| \cdot 1)^2 \leq (\sum_{i=1}^n |e_i|^2)(\sum_{i=1}^n 1^2)$.
III. Isso simplifica para: $(\sum_{i=1}^n |e_i|)^2 \leq (\sum_{i=1}^n e_i^2) n$.
IV. Dividindo por $n^2$ em ambos os lados, obtemos: $\left(\frac{\sum_{i=1}^n |e_i|}{n}\right)^2 \leq \frac{\sum_{i=1}^n e_i^2}{n}$.
V.  O lado esquerdo √© $(\text{MAD})^2$, e o lado direito √© $(\text{RMSE})^2$.
VI. Tomando a raiz quadrada de ambos os lados, temos: $\text{MAD} \leq \text{RMSE}$.
VII. Portanto, o MAD √© sempre menor ou igual ao RMSE. $\blacksquare$

### Conclus√£o
O Desvio Absoluto M√©dio (MAD) √© uma m√©trica fundamental para avaliar a precis√£o das previs√µes em modelos de s√©ries temporais. Sua simplicidade, facilidade de c√°lculo e interpreta√ß√£o o tornam uma ferramenta valiosa para entender a magnitude dos erros de previs√£o [^10]. Embora n√£o considere a dire√ß√£o dos erros ou penalize mais os erros maiores como o MSE, o MAD oferece uma vis√£o geral da precis√£o do modelo, e √© particularmente √∫til quando a magnitude geral dos erros de previs√£o √© de maior interesse [^10]. Em conjunto com outras m√©tricas como MSE, RMSE, MAPE e MASE, o MAD auxilia na escolha do modelo mais adequado e na avalia√ß√£o da confiabilidade das previs√µes. A escolha da m√©trica apropriada depende do contexto espec√≠fico, e √© importante levar em considera√ß√£o que diferentes m√©tricas podem apresentar resultados diferentes, sendo importante analisar os resultados em conjunto.

### Refer√™ncias
[^5]: *Time series models assume that past demand data are representative of future demand.*
[^9]: *Forecast error = Actual demand - Forecast.*
[^10]: *Because a forecast predicts future demand, we cannot compare it to actual demand. However, because we have assumed that historical demand is representative of future demand, we can formulate "forecasts of the past" using a particular model and compare those forecasts to historical demand.*
[^12]: *With both the MAD and MSE, the size of the deviations depends on the volume of the item being forecast. For example, if the demand is in thousands of units, the absolute and squared deviations could be quite large. The mean absolute percentage error (MAPE) remedies this problem by expressing the deviation as a percentage of the actual demand.*
<!-- END -->
