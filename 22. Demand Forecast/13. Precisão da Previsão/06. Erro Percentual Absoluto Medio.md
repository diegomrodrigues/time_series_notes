## Erro Percentual Absoluto M√©dio (MAPE) na Avalia√ß√£o da Precis√£o da Previs√£o em S√©ries Temporais

### Introdu√ß√£o
Dando continuidade √† nossa explora√ß√£o sobre modelagem de s√©ries temporais e avalia√ß√£o da precis√£o da previs√£o, este cap√≠tulo se aprofunda no Erro Percentual Absoluto M√©dio (MAPE), uma m√©trica crucial para quantificar a precis√£o de previs√µes expressas como uma porcentagem da demanda real [^12]. Como temos visto nos cap√≠tulos anteriores, a modelagem de s√©ries temporais envolve analisar dados sequenciais ao longo do tempo para prever valores futuros [^5]. Dada a natureza imperfeita das previs√µes, torna-se essencial avaliar e quantificar a diferen√ßa entre os valores previstos e os valores reais. O MAPE oferece uma perspectiva valiosa sobre a precis√£o das previs√µes, especialmente quando a escala ou magnitude da demanda varia significativamente [^12]. Este cap√≠tulo tem como objetivo analisar detalhadamente a m√©trica MAPE, suas propriedades, como calcul√°-la e interpretar seus resultados, e explorar suas limita√ß√µes, como sua divis√£o por zero ou valores pr√≥ximos a zero.

### Conceitos Fundamentais
O Erro Percentual Absoluto M√©dio (MAPE) √© uma m√©trica fundamental utilizada para avaliar a precis√£o das previs√µes em s√©ries temporais [^12]. Ele representa a m√©dia das diferen√ßas percentuais absolutas entre os valores previstos e os valores reais, contornando as limita√ß√µes do Desvio Absoluto M√©dio (MAD) e do Erro Quadr√°tico M√©dio (MSE) quando a escala ou magnitude da demanda varia significativamente. O MAPE expressa o erro como uma porcentagem da demanda real, facilitando a compara√ß√£o da precis√£o entre diferentes conjuntos de dados com diferentes magnitudes ou unidades [^12]. Matematicamente, o MAPE √© definido como:

$$ \text{MAPE} = \frac{\sum \left|\frac{\text{Demanda Real} - \text{Previs√£o}}{\text{Demanda Real}}\right|}{n} \times 100 $$ [^12]

Onde:
- $\text{Demanda Real}$ √© o valor real da s√©rie temporal no per√≠odo considerado;
-  $\text{Previs√£o}$ √© o valor previsto para o mesmo per√≠odo pelo modelo;
-  $\sum$ denota a soma dos valores absolutos das diferen√ßas percentuais entre a demanda real e a previs√£o em todos os per√≠odos considerados;
-  $n$ √© o n√∫mero de per√≠odos inclu√≠dos no c√°lculo.

√â essencial lembrar que, dado que as previs√µes s√£o para o futuro, a avalia√ß√£o da precis√£o da previs√£o √© feita com dados hist√≥ricos, utilizando o conceito de *‚Äúforecasts of the past‚Äù*, comparando as previs√µes com os valores reais j√° conhecidos [^10].

**Proposi√ß√£o 4.1:** O MAPE √© uma medida relativa de precis√£o que expressa o erro como uma porcentagem da demanda real.

**Prova:**
I. O erro percentual de previs√£o no per√≠odo t, denotado por $p_t$, √© dado por: $p_t = \frac{\text{Demanda Real}_t - \text{Previs√£o}_t}{\text{Demanda Real}_t}$.
II. O valor absoluto do erro percentual de previs√£o √© dado por: $|p_t| = \left|\frac{\text{Demanda Real}_t - \text{Previs√£o}_t}{\text{Demanda Real}_t}\right|$.
III.  O MAPE √© definido como a m√©dia desses valores absolutos expressa em porcentagem:
    $$\text{MAPE} = \frac{\sum |p_t|}{n} \times 100 = \frac{\sum \left|\frac{\text{Demanda Real} - \text{Previs√£o}}{\text{Demanda Real}}\right|}{n} \times 100$$
IV. Como o MAPE √© calculado como uma porcentagem do erro em rela√ß√£o √† demanda real, torna-se uma medida relativa que √© √∫til para comparar diferentes s√©ries temporais, mesmo com diferentes magnitudes. $\blacksquare$

**Observa√ß√£o 4.1:** Ao expressar os erros como uma porcentagem da demanda real, o MAPE permite a compara√ß√£o da precis√£o entre diferentes conjuntos de dados com diferentes magnitudes ou unidades, contornando a depend√™ncia do volume encontrada no MAD e no MSE.

#### Interpreta√ß√£o do MAPE
Valores menores de MAPE indicam que as previs√µes, em m√©dia, est√£o mais pr√≥ximas da demanda real em termos percentuais, sugerindo maior precis√£o do modelo. Por outro lado, valores maiores de MAPE indicam que as previs√µes, em m√©dia, est√£o mais distantes da demanda real em termos percentuais, implicando menor precis√£o [^12]. O MAPE √© particularmente √∫til quando se deseja expressar o erro de previs√£o em termos relativos ou quando a demanda apresenta grandes varia√ß√µes em magnitude [^12]. Um MAPE de 13,19%, por exemplo, significa que, em m√©dia, as previs√µes est√£o 13,19% distantes da demanda real [^12].

#### C√°lculo do MAPE
Para calcular o MAPE, √© necess√°rio:
1. Calcular o erro de previs√£o para cada per√≠odo: Subtrair a previs√£o da demanda real para cada per√≠odo na s√©rie temporal.
2. Calcular o erro percentual: Dividir o erro de previs√£o pela demanda real para o mesmo per√≠odo e multiplicar por 100.
3. Calcular o valor absoluto do erro percentual: Tomar o valor absoluto de cada erro percentual.
4. Calcular a m√©dia dos valores absolutos dos erros percentuais: Somar todos os valores absolutos e dividir pelo n√∫mero total de per√≠odos considerados.

> üí° **Exemplo Num√©rico:**
> Considere uma s√©rie temporal de demanda e suas respectivas previs√µes:
>
> | Per√≠odo | Demanda Real ($y_t$) | Previs√£o ($\hat{y}_t$) |
> |---|---|---|
> | 1 | 100 | 110 |
> | 2 | 120 | 115 |
> | 3 | 130 | 125 |
> | 4 | 150 | 140 |
> | 5 | 160 | 155 |
>
> $\text{Step 1: Calcular os erros de previs√£o: }$
>
> $100-110 = -10$
> $120-115 = 5$
> $130-125 = 5$
> $150-140 = 10$
> $160-155 = 5$
>
> $\text{Step 2: Calcular o erro percentual: }$
>
> $\frac{-10}{100} = -0.1$
> $\frac{5}{120} \approx 0.0417$
> $\frac{5}{130} \approx 0.0385$
> $\frac{10}{150} \approx 0.0667$
> $\frac{5}{160} \approx 0.0313$
>
> $\text{Step 3: Calcular o valor absoluto do erro percentual: }$
>
> $|-0.1| = 0.1$
> $|0.0417| = 0.0417$
> $|0.0385| = 0.0385$
> $|0.0667| = 0.0667$
> $|0.0313| = 0.0313$
>
> $\text{Step 4: Calcular a m√©dia dos valores absolutos do erro percentual e multiplicar por 100: }$
>
> $\text{MAPE} = \frac{0.1 + 0.0417 + 0.0385 + 0.0667 + 0.0313}{5} \times 100 = \frac{0.2782}{5} \times 100 = 0.05564 \times 100 = 5.564\%$
>
> Um MAPE de aproximadamente 5.564% indica que, em m√©dia, as previs√µes desviam cerca de 5.564% da demanda real.

> üí° **Exemplo Num√©rico:**
> Suponha que estejamos analisando a demanda mensal de um produto em um varejo. As vendas reais e as previs√µes do modelo para os √∫ltimos cinco meses s√£o dadas na tabela abaixo:
>
> | M√™s | Demanda Real | Previs√£o |
> |-----|--------------|----------|
> | 1   | 1000         | 1100       |
> | 2   | 1200         | 1150       |
> | 3   | 1300         | 1250       |
> | 4   | 1500         | 1400       |
> | 5   | 1600         | 1550       |
>
> $\text{Step 1: Calcular os erros de previs√£o: }$
>
> $1000-1100 = -100$
> $1200-1150 = 50$
> $1300-1250 = 50$
> $1500-1400 = 100$
> $1600-1550 = 50$
>
> $\text{Step 2: Calcular o erro percentual: }$
>
> $\frac{-100}{1000} = -0.10$
> $\frac{50}{1200} \approx 0.0417$
> $\frac{50}{1300} \approx 0.0385$
> $\frac{100}{1500} \approx 0.0667$
> $\frac{50}{1600} \approx 0.0313$
>
> $\text{Step 3: Calcular o valor absoluto do erro percentual: }$
>
> $|-0.10| = 0.10$
> $|0.0417| = 0.0417$
> $|0.0385| = 0.0385$
> $|0.0667| = 0.0667$
> $|0.0313| = 0.0313$
>
> $\text{Step 4: Calcular a m√©dia dos valores absolutos do erro percentual e multiplicar por 100: }$
>
> $\text{MAPE} = \frac{0.10 + 0.0417 + 0.0385 + 0.0667 + 0.0313}{5} \times 100 = \frac{0.2782}{5} \times 100 = 0.05564 \times 100 \approx 5.56\%$
>
> O valor do MAPE de 5.56% indica que, em m√©dia, as previs√µes do modelo desviam aproximadamente 5.56% da demanda real.

> üí° **Exemplo Num√©rico:** Vamos analisar um cen√°rio de previs√£o de vendas com valores e previs√µes um pouco diferentes para demonstrar como diferentes erros impactam o MAPE.
>
> | M√™s | Demanda Real | Previs√£o |
> |-----|--------------|----------|
> | 1   | 100          | 120       |
> | 2   | 120          | 100       |
> | 3   | 130          | 140       |
> | 4   | 150          | 130       |
> | 5   | 160          | 170       |
>
> $\text{Step 1: Calcular os erros de previs√£o: }$
>
> $100 - 120 = -20$
> $120 - 100 = 20$
> $130 - 140 = -10$
> $150 - 130 = 20$
> $160 - 170 = -10$
>
> $\text{Step 2: Calcular o erro percentual: }$
>
> $\frac{-20}{100} = -0.20$
> $\frac{20}{120} \approx 0.1667$
> $\frac{-10}{130} \approx -0.0769$
> $\frac{20}{150} \approx 0.1333$
> $\frac{-10}{160} \approx -0.0625$
>
> $\text{Step 3: Calcular o valor absoluto do erro percentual: }$
>
> $|-0.20| = 0.20$
> $|0.1667| = 0.1667$
> $|-0.0769| = 0.0769$
> $|0.1333| = 0.1333$
> $|-0.0625| = 0.0625$
>
> $\text{Step 4: Calcular a m√©dia dos valores absolutos do erro percentual e multiplicar por 100: }$
>
> $\text{MAPE} = \frac{0.20 + 0.1667 + 0.0769 + 0.1333 + 0.0625}{5} \times 100 = \frac{0.6394}{5} \times 100 = 0.12788 \times 100 \approx 12.79\%$
>
> Neste caso, o MAPE √© de 12.79%. Note que, mesmo com erros em diferentes dire√ß√µes (subestimativa e superestimativa), o MAPE fornece uma vis√£o geral da magnitude m√©dia do erro em termos percentuais. Comparando com o exemplo anterior, um MAPE maior indica que, em m√©dia, as previs√µes deste modelo tem um desempenho pior.

#### Compara√ß√£o com outras m√©tricas de erro
Enquanto o MAPE expressa o erro em termos percentuais, o Desvio Absoluto M√©dio (MAD) e o Erro Quadr√°tico M√©dio (MSE) oferecem diferentes perspectivas sobre a magnitude do erro [^10, 12]. O MAD fornece uma medida da magnitude absoluta do erro, e o MSE penaliza erros maiores de forma mais significativa [^10, 12]. A escolha da m√©trica apropriada depende do contexto espec√≠fico, e uma an√°lise abrangente deve considerar v√°rias m√©tricas. O RMSE (Raiz do Erro Quadr√°tico M√©dio) √© √∫til quando se quer avaliar o erro na mesma unidade original dos dados e manter a penaliza√ß√£o de grandes erros do MSE, e o MASE (Erro M√©dio Absoluto Escalonado) √© √∫til quando a demanda √© pr√≥xima de zero.

> üí° **Exemplo Num√©rico:** Vamos comparar o MAPE, MAD, e MSE utilizando os dados do primeiro exemplo num√©rico:
>
> | Per√≠odo | Demanda Real ($y_t$) | Previs√£o ($\hat{y}_t$) | Erro ($y_t - \hat{y}_t$) | |Erro| |Erro¬≤|
> |---|---|---|---|---|---|
> | 1 | 100 | 110 | -10 | 10 | 100 |
> | 2 | 120 | 115 | 5 | 5 | 25 |
> | 3 | 130 | 125 | 5 | 5 | 25 |
> | 4 | 150 | 140 | 10 | 10 | 100 |
> | 5 | 160 | 155 | 5 | 5 | 25 |
>
> Calculamos anteriormente que o MAPE √© de 5.564%.
>
> $\text{C√°lculo do MAD: }$
>
> $\text{MAD} = \frac{\sum |y_t - \hat{y}_t|}{n} = \frac{10 + 5 + 5 + 10 + 5}{5} = \frac{35}{5} = 7$
>
> $\text{C√°lculo do MSE: }$
>
> $\text{MSE} = \frac{\sum (y_t - \hat{y}_t)^2}{n} = \frac{100 + 25 + 25 + 100 + 25}{5} = \frac{275}{5} = 55$
>
> Comparando as m√©tricas:
>
> | M√©trica | Valor |
> |---|---|
> | MAPE | 5.564% |
> | MAD | 7 |
> | MSE | 55 |
>
> O MAD indica que, em m√©dia, as previs√µes desviam 7 unidades da demanda real. O MSE, com um valor de 55, penaliza mais os erros maiores e, portanto, n√£o tem uma interpreta√ß√£o direta, mas sinaliza que a magnitude dos erros √© relativamente baixa. O MAPE de 5.564% expressa o erro em termos percentuais, permitindo uma compara√ß√£o relativa com outros modelos ou conjuntos de dados, mesmo que os volumes de demanda sejam diferentes.

**Lema 4.1:** O MAPE pode gerar valores indefinidos se a demanda real em algum per√≠odo for zero.

**Prova:**
I. A f√≥rmula do MAPE √©:
$$ \text{MAPE} = \frac{\sum \left|\frac{\text{Demanda Real} - \text{Previs√£o}}{\text{Demanda Real}}\right|}{n} \times 100 $$

II. A f√≥rmula envolve a divis√£o da diferen√ßa entre a demanda real e a previs√£o pela demanda real em cada per√≠odo: $\frac{\text{Demanda Real} - \text{Previs√£o}}{\text{Demanda Real}}$.

III. Se em algum per√≠odo a demanda real for zero, a opera√ß√£o de divis√£o torna-se $\frac{\text{Demanda Real} - \text{Previs√£o}}{0}$, que √© indefinida.

IV. Portanto, o MAPE n√£o √© definido para s√©ries temporais onde a demanda real em algum per√≠odo √© zero. $\blacksquare$

**Observa√ß√£o 4.2:** Pequenas varia√ß√µes na demanda real, especialmente quando pr√≥ximos a zero, podem causar grandes flutua√ß√µes no MAPE, tornando-o inst√°vel nessas circunst√¢ncias. M√©todos de estat√≠stica robusta podem ser utilizados para minimizar o impacto de outliers no MAPE.

**Teorema 4.1:** O MAPE n√£o √© sim√©trico, o que significa que ele penaliza mais as subestima√ß√µes do que as superestima√ß√µes da demanda.

**Prova:**
I.  Seja $y_t$ a demanda real e $\hat{y}_t$ a previs√£o.
II.  Se a previs√£o √© uma subestima√ß√£o, ent√£o $\hat{y}_t < y_t$. O erro percentual ser√° $\frac{y_t - \hat{y}_t}{y_t} > 0$.
III. Se a previs√£o √© uma superestima√ß√£o, ent√£o $\hat{y}_t > y_t$. O erro percentual ser√° $\frac{y_t - \hat{y}_t}{y_t} < 0$.

IV. O MAPE usa o valor absoluto do erro percentual. Portanto, para uma subestima√ß√£o, onde $\hat{y}_t = 0.9y_t$, por exemplo, o erro √© $\frac{|y_t-0.9y_t|}{y_t} = 0.1$, e para uma superestima√ß√£o de mesma magnitude, onde $\hat{y}_t=1.1y_t$, o erro √© $\frac{|y_t-1.1y_t|}{y_t} = 0.1$. Entretanto, vamos analisar o que acontece com valores que se afastam mais da demanda real:
V. Para uma subestima√ß√£o, onde $\hat{y}_t = 0.5y_t$, o erro √© $\frac{|y_t-0.5y_t|}{y_t} = 0.5$. Para uma superestima√ß√£o de mesma magnitude, onde $\hat{y}_t=1.5y_t$, o erro √© $\frac{|y_t-1.5y_t|}{y_t} = 0.5$.
VI. Para uma subestima√ß√£o, onde $\hat{y}_t = 0.1y_t$, o erro √© $\frac{|y_t-0.1y_t|}{y_t} = 0.9$. Para uma superestima√ß√£o de mesma magnitude, onde $\hat{y}_t=1.9y_t$, o erro √© $\frac{|y_t-1.9y_t|}{y_t} = 0.9$.
VII. Se olharmos para os valores absolutos do erro, teremos um erro sim√©trico. Entretanto, isso n√£o ocorre quando calculamos o MAPE. Como o erro percentual √© definido como a diferen√ßa dividida pela demanda real, o MAPE pode penalizar mais as subestima√ß√µes do que as superestima√ß√µes. Por exemplo, se a previs√£o for 50% menor que a demanda real, o erro percentual √© 0.5. Se a previs√£o for 50% maior que a demanda real, o erro percentual tamb√©m √© 0.5.
VIII. Entretanto, se a previs√£o for 90% menor que a demanda real (por exemplo, 100, quando o real era 1000), o erro percentual ser√° de 0.9. Mas se a previs√£o for 90% maior que a demanda real (por exemplo, 1900, quando o real era 1000), o erro percentual tamb√©m ser√° de 0.9. Contudo, em casos de erro muito maior por superestima√ß√£o, se a previs√£o fosse 10000 (ou seja, 1000% maior que o real), o erro percentual ser√° de 9 (900%), o que √© diferente da subestima√ß√£o na mesma magnitude, onde a previs√£o √© zero, e o erro percentual ser√° de 1 (100%), mesmo se as diferen√ßas em unidades (9000 unidades) forem as mesmas.
IX.  Portanto, o MAPE n√£o √© sim√©trico e penaliza mais as subestima√ß√µes do que as superestima√ß√µes da demanda, o que √© uma importante considera√ß√£o ao interpretar essa m√©trica. $\blacksquare$

> üí° **Exemplo Num√©rico:**
> Para ilustrar a assimetria do MAPE, vamos comparar dois cen√°rios: um com subestima√ß√£o e outro com superestima√ß√£o, usando uma demanda real de 100.
>
> *   **Cen√°rio 1: Subestima√ß√£o:** A previs√£o √© 50 (50% abaixo da demanda real).
>     O erro percentual √© $\frac{|100 - 50|}{100} = \frac{50}{100} = 0.5 = 50\%$.
>
> *   **Cen√°rio 2: Superestima√ß√£o:** A previs√£o √© 150 (50% acima da demanda real).
>     O erro percentual √© $\frac{|100 - 150|}{100} = \frac{50}{100} = 0.5 = 50\%$.
>
>
> Agora, vamos comparar com um cen√°rio de erro maior:
> *   **Cen√°rio 3: Subestima√ß√£o:** A previs√£o √© 10 (90% abaixo da demanda real).
>      O erro percentual √© $\frac{|100 - 10|}{100} = \frac{90}{100} = 0.9 = 90\%$.
>
> *  **Cen√°rio 4: Superestima√ß√£o:** A previs√£o √© 190 (90% acima da demanda real).
>     O erro percentual √© $\frac{|100 - 190|}{100} = \frac{90}{100} = 0.9 = 90\%$.
>
>   Em termos de erro absoluto, os cen√°rios 1 e 2 tem o mesmo erro e os cen√°rios 3 e 4 tamb√©m tem o mesmo erro. Contudo, em cen√°rios extremos, a assimetria se torna evidente:
>
> *   **Cen√°rio 5: Subestima√ß√£o Extrema:** A previs√£o √© 0 (100% abaixo da demanda real).
>     O erro percentual √© $\frac{|100 - 0|}{100} = \frac{100}{100} = 1 = 100\%$.
>
> *   **Cen√°rio 6: Superestima√ß√£o Extrema:** A previs√£o √© 1000 (900% acima da demanda real).
>      O erro percentual √© $\frac{|100 - 1000|}{100} = \frac{900}{100} = 9 = 900\%$.
>
>  Este exemplo ilustra como o MAPE penaliza mais as superestima√ß√µes extremas do que as subestima√ß√µes extremas devido √† forma como o erro percentual √© calculado. Observe que, mesmo com os mesmos valores absolutos de erro (90 em ambos os cen√°rios), o erro percentual √© diferente.

**Teorema 4.2:** O MAPE √© invariante por escala se a escala for multiplicativa (escalar), ou seja, se a demanda real e a previs√£o forem multiplicadas pela mesma constante positiva, o MAPE n√£o se altera.

**Prova:**
I. Seja $y_t$ a demanda real e $\hat{y}_t$ a previs√£o no per√≠odo $t$. O MAPE √© dado por:
   $$ \text{MAPE} = \frac{1}{n}\sum_{t=1}^{n} \left| \frac{y_t - \hat{y}_t}{y_t} \right| \times 100 $$

II. Seja $c > 0$ uma constante. Se multiplicarmos tanto a demanda real quanto a previs√£o por $c$, obteremos novas s√©ries temporais $y'_t = cy_t$ e $\hat{y}'_t = c\hat{y}_t$.

III. O novo MAPE, $\text{MAPE}'$, ser√°:
    $$ \text{MAPE}' = \frac{1}{n}\sum_{t=1}^{n} \left| \frac{cy_t - c\hat{y}_t}{cy_t} \right| \times 100 $$
IV. Podemos simplificar a express√£o:
    $$ \text{MAPE}' = \frac{1}{n}\sum_{t=1}^{n} \left| \frac{c(y_t - \hat{y}_t)}{cy_t} \right| \times 100 $$
V. Simplificando o $c$ no numerador e denominador:
     $$ \text{MAPE}' = \frac{1}{n}\sum_{t=1}^{n} \left| \frac{y_t - \hat{y}_t}{y_t} \right| \times 100 $$
VI.  Assim, $\text{MAPE}' = \text{MAPE}$. Portanto, o MAPE √© invariante por escala quando a escala √© multiplicativa. $\blacksquare$

> üí° **Exemplo Num√©rico:**
> Considere a s√©rie temporal do primeiro exemplo:
>
> | Per√≠odo | Demanda Real ($y_t$) | Previs√£o ($\hat{y}_t$) |
> |---|---|---|
> | 1 | 100 | 110 |
> | 2 | 120 | 115 |
> | 3 | 130 | 125 |
> | 4 | 150 | 140 |
> | 5 | 160 | 155 |
>
> J√° calculamos que o MAPE √© de 5.564%. Agora, vamos multiplicar todos os valores por 2 e recalcular o MAPE:
>
> | Per√≠odo | Demanda Real ($y'_t$) | Previs√£o ($\hat{y}'_t$) |
> |---|---|---|
> | 1 | 200 | 220 |
> | 2 | 240 | 230 |
> | 3 | 260 | 250 |
> | 4 | 300 | 280 |
> | 5 | 320 | 310 |
>
> $\text{Step 1: Calcular os erros de previs√£o: }$
>
> $200-220 = -20$
> $240-230 = 10$
> $260-250 = 10$
> $300-280 = 20$
> $320-310 = 10$
>
> $\text{Step 2: Calcular o erro percentual: }$
>
> $\frac{-20}{200} = -0.1$
> $\frac{10}{240} \approx 0.0417$
> $\frac{10}{260} \approx 0.0385$
> $\frac{20}{300} \approx 0.0667$
> $\frac{10}{320} \approx 0.0313$
>
> $\text{Step 3: Calcular o valor absoluto do erro percentual: }$
>
> $|-0.1| = 0.1$
> $|0.0417| = 0.0417$
> $|0.0385| = 0.0385$
> $|0.0667| = 0.0667$
> $|0.0313| = 0.0313$
>
> $\text{Step 4: Calcular a m√©dia dos valores absolutos do erro percentual e multiplicar por 100: }$
>
> $\text{MAPE} = \frac{0.1 + 0.0417 + 0.0385 + 0.0667 + 0.0313}{5} \times 100 = \frac{0.2782}{5} \times 100 = 0.05564 \times 100 = 5.564\%$
>
> O MAPE permanece o mesmo, demonstrando a invari√¢ncia por escala multiplicativa.

**Corol√°rio 4.1:** Se a escala da demanda for alterada por uma transforma√ß√£o aditiva (somando uma constante a todos os valores), o MAPE geralmente ser√° afetado.
**Prova:**
I. Seja $y_t$ a demanda real e $\hat{y}_t$ a previs√£o no per√≠odo $t$. Seja $c$ uma constante. Se adicionarmos $c$ tanto √† demanda real quanto √† previs√£o, obteremos $y'_t = y_t + c$ e $\hat{y}'_t = \hat{y}_t + c$.
II. O novo MAPE, $\text{MAPE}'$ ser√°:
    $$ \text{MAPE}' = \frac{1}{n} \sum_{t=1}^n \left| \frac{(y_t + c) - (\hat{y}_t + c)}{y_t + c} \right| \times 100 $$
III. Simplificando a express√£o:
     $$ \text{MAPE}' = \frac{1}{n} \sum_{t=1}^n \left| \frac{y_t - \hat{y}_t}{y_t + c} \right| \times 100 $$
IV. Em geral, esta nova express√£o ser√° diferente do MAPE original, pois o denominador foi alterado. Assim, o MAPE n√£o √© invariante por transforma√ß√µes aditivas na demanda. $\blacksquare$

> üí° **Exemplo Num√©rico:**
> Usando os mesmos dados do exemplo anterior, vamos agora adicionar a constante 100 a todos os valores da demanda real e da previs√£o e recalcular o MAPE:
>
> | Per√≠odo | Demanda Real ($y_t$) | Previs√£o ($\hat{y}_t$) |
> |---|---|---|
> | 1 | 100 | 110 |
> | 2 | 120 | 115 |
> | 3 | 130 | 125 |
> | 4 | 150 | 140 |
> | 5 | 160 | 155 |
>
> Transformando com c=100
>
> | Per√≠odo | Demanda Real ($y'_t$) | Previs√£o ($\hat{y}'_t$) |
> |---|---|---|
> | 1 | 200 | 210 |
> | 2 | 220 | 215 |
> | 3 | 230 | 225 |
> | 4 | 250 | 240 |
> | 5 | 260 | 255 |
>
> $\text{Step 1: Calcular os erros de previs√£o: }$
>
> $200-210 = -10$
> $220-215 = 5$
> $230-225 = 5$
> $250-240 = 10$
> $260-255 = 5$
>
> $\text{Step 2: Calcular o erro percentual: }$
>
> $\frac{-10}{200} = -0.05$
> $\frac{5}{220} \approx 0.0227$
> $\frac{5}{230} \approx 0.0217$
> $\frac{10}{250} = 0.04$
> $\frac{5}{260} \approx 0.0192$
>
> $\text{Step 3: Calcular o valor absoluto do erro percentual: }$
>
> $|-0.05| = 0.05$
> $|0.0227| = 0.0227$
> $|0.0217| = 0.0217$
> $|0.04| = 0.04$
> $|0.0192| = 0.0192$
>
> $\text{Step 4: Calcular a m√©dia dos valores absolutos do erro percentual e multiplicar por 100: }$
>
> $\text{MAPE} = \frac{0.05 + 0.0227 + 0.0217 + 0.04 + 0.0192}{5} \times 100 = \frac{0.1536}{5} \times 100 = 0.03072 \times 100 = 3.072\%$
>
> O novo MAPE √© de 3.072%, o que √© diferente do MAPE original de 5.564%. Isso confirma que o MAPE n√£o √© invariante por transforma√ß√µes aditivas.

### Conclus√£o
O Erro Percentual Absoluto M√©dio (MAPE) √© uma m√©trica crucial para avaliar a precis√£o de previs√µes em s√©ries temporais, oferecendo uma perspectiva √∫til ao expressar os erros como uma porcentagem da demanda real, tornando-a especialmente relevante quando se deseja compreender o impacto relativo dos erros de previs√£o.

A f√≥rmula do MAPE √© dada por:

$$
\text{MAPE} = \frac{1}{n} \sum_{t=1}^{n} \left| \frac{A_t - F_t}{A_t} \right| \times 100
$$

Onde:

*   $A_t$ representa o valor real no tempo $t$.
*   $F_t$ representa o valor previsto no tempo $t$.
*   $n$ √© o n√∫mero total de observa√ß√µes.

Um MAPE de 10%, por exemplo, indica que, em m√©dia, as previs√µes est√£o erradas em 10% da demanda real. Esta interpreta√ß√£o direta faz do MAPE uma ferramenta valiosa para comunicar a qualidade das previs√µes para stakeholders n√£o t√©cnicos.

No entanto, o MAPE possui algumas limita√ß√µes importantes. Uma das principais √© sua instabilidade quando os valores reais ($A_t$) se aproximam de zero. Nesses casos, o erro percentual pode se tornar extremamente grande e distorcer a m√©dia, levando a conclus√µes err√¥neas sobre a qualidade do modelo de previs√£o. Al√©m disso, o MAPE n√£o √© sim√©trico: um erro de previs√£o para mais e um erro de previs√£o para menos de mesma magnitude n√£o ter√£o o mesmo impacto no resultado final da m√©trica. Por exemplo, superestimar uma demanda por 10% ir√° resultar em uma parcela menor do erro no c√°lculo do MAPE do que subestimar por 10%.

Em situa√ß√µes onde o MAPE pode apresentar essas dificuldades, outras m√©tricas como o Erro Quadr√°tico M√©dio (RMSE) ou o Erro Absoluto M√©dio (MAE) podem ser mais adequadas. A escolha da m√©trica apropriada deve levar em considera√ß√£o as caracter√≠sticas espec√≠ficas do problema em quest√£o, assim como a sensibilidade a diferentes tipos de erros.

Para complementar a an√°lise de precis√£o do modelo, √© √∫til observar a distribui√ß√£o dos erros de previs√£o individualmente, verificando se h√° padr√µes ou tend√™ncias. Ferramentas visuais como gr√°ficos de dispers√£o entre valores reais e previstos, ou histogramas dos erros, podem fornecer informa√ß√µes adicionais valiosas para aprimorar o modelo.

Al√©m disso, para modelos de s√©ries temporais que incorporam componentes sazonais, √© recomend√°vel avaliar o desempenho do modelo em cada temporada, verificando se o modelo √© capaz de capturar os padr√µes peri√≥dicos adequadamente. O uso de t√©cnicas como a decomposi√ß√£o sazonal, podem ajudar a isolar o efeito da sazonalidade nos erros de previs√£o e, portanto, melhorar a an√°lise do desempenho do modelo ao longo do tempo.

Em resumo, o MAPE √© uma ferramenta √∫til para avaliar o desempenho de modelos de previs√£o, especialmente por sua interpreta√ß√£o intuitiva. No entanto, √© fundamental estar ciente de suas limita√ß√µes e usar outras m√©tricas e an√°lises complementares quando necess√°rio para garantir uma avalia√ß√£o completa da qualidade das previs√µes.
<!-- END -->
