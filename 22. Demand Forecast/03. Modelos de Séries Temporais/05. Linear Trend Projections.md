## ProjeÃ§Ãµes Lineares de TendÃªncia: Fundamentos e AplicaÃ§Ãµes

### IntroduÃ§Ã£o

Este capÃ­tulo explora em profundidade as **projeÃ§Ãµes lineares de tendÃªncia**, uma tÃ©cnica fundamental na anÃ¡lise de sÃ©ries temporais que utiliza **regressÃ£o linear** para ajustar uma linha de tendÃªncia aos dados histÃ³ricos e extrapolÃ¡-la para o futuro [^11]. A premissa central desta abordagem Ã© que existe uma relaÃ§Ã£o linear entre a demanda e o tempo, o que permite projetar a demanda para perÃ­odos futuros utilizando uma equaÃ§Ã£o de regressÃ£o [^11]. Embora esta tÃ©cnica nÃ£o considere explicitamente variaÃ§Ãµes sazonais ou cÃ­clicas, ela oferece uma estimativa Ãºtil da tendÃªncia de longo prazo da demanda. Exploraremos os fundamentos matemÃ¡ticos e estatÃ­sticos desta tÃ©cnica, sua aplicaÃ§Ã£o prÃ¡tica, bem como as limitaÃ§Ãµes e mÃ©todos para aprimorar suas previsÃµes. Discutiremos ainda, como a anÃ¡lise de Fourier pode auxiliar na identificaÃ§Ã£o de periodicidades na tendÃªncia.

### Fundamentos da ProjeÃ§Ã£o Linear de TendÃªncia

A projeÃ§Ã£o linear de tendÃªncia baseia-se no princÃ­pio de que uma relaÃ§Ã£o linear pode ser usada para aproximar a evoluÃ§Ã£o da demanda ao longo do tempo. O modelo de regressÃ£o linear Ã© expresso pela seguinte equaÃ§Ã£o:

$$\hat{y} = a + bx$$

onde:
-   $\hat{y}$ Ã© o valor previsto da demanda no tempo $x$.
-   $a$ Ã© o intercepto da linha de regressÃ£o com o eixo y, representando o valor da demanda quando $x = 0$.
-   $b$ Ã© a inclinaÃ§Ã£o da linha de regressÃ£o, representando a taxa de variaÃ§Ã£o da demanda por unidade de tempo.
-   $x$ Ã© a variÃ¡vel independente, que representa o tempo (por exemplo, perÃ­odo, trimestre, ano).

Os parÃ¢metros $a$ e $b$ sÃ£o determinados por meio do mÃ©todo dos mÃ­nimos quadrados, que minimiza a soma dos quadrados das diferenÃ§as entre os valores de demanda observados e os valores previstos pela linha de regressÃ£o [^11]. As fÃ³rmulas para calcular $a$ e $b$ sÃ£o:

$$b = \frac{\sum{xy} - n\bar{x}\bar{y}}{\sum{x^2} - n\bar{x}^2}$$

$$a = \bar{y} - b\bar{x}$$

onde:
-   $\bar{x}$ e $\bar{y}$ sÃ£o as mÃ©dias dos valores de $x$ e $y$, respectivamente.
-   $n$ Ã© o nÃºmero de pontos de dados usados para calcular $a$ e $b$.

#### InterpretaÃ§Ã£o dos ParÃ¢metros a e b

*   O **intercepto $a$** representa a demanda prevista no tempo zero. Em muitos casos, este valor pode nÃ£o ter significado prÃ¡tico direto, principalmente se o tempo zero estiver fora do intervalo de tempo dos dados observados. No entanto, o valor de $a$ Ã© fundamental para o correto posicionamento da linha de regressÃ£o.
*   A **inclinaÃ§Ã£o $b$** representa a mudanÃ§a mÃ©dia na demanda para cada incremento de uma unidade no tempo. Um valor de $b$ positivo indica que a demanda estÃ¡ aumentando com o tempo, e um valor negativo indica que a demanda estÃ¡ diminuindo com o tempo.

> ğŸ’¡ **Exemplo NumÃ©rico:**
> Suponha que temos dados de vendas trimestrais de um produto nos Ãºltimos 3 anos:
>
> | Trimestre (x) | Vendas (y) |
> |--------------|------------|
> | 1            | 100        |
> | 2            | 110        |
> | 3            | 120        |
> | 4            | 135        |
> | 5            | 145        |
> | 6            | 160        |
> | 7            | 170        |
> | 8            | 185        |
> | 9            | 195        |
> | 10           | 210        |
> | 11           | 225        |
> | 12           | 240        |
>
>
> Calculando as mÃ©dias: $\bar{x} = 6.5$ e $\bar{y} = 166.25$.
>
> Calcular $\sum{xy}$:
>
> $\sum{xy} = (1*100) + (2*110) + (3*120) + \ldots + (12*240) = 14380$
>
> Calcular $\sum{x^2}$:
>
> $\sum{x^2} = 1^2 + 2^2 + 3^2 + \ldots + 12^2 = 650$
>
> Calcular $b$:
>
> $b = \frac{14380 - 12*6.5*166.25}{650 - 12*6.5^2} = \frac{14380 - 12967.5}{650-507} = 10.0175$
>
> Calcular $a$:
>
> $a = 166.25 - 10.0175 * 6.5 \approx 101.2$
>
> Portanto, a equaÃ§Ã£o da linha de tendÃªncia linear Ã© $\hat{y} = 101.2 + 10.0175x$.
> Para projetar as vendas no trimestre 13, substituÃ­mos x=13:
>
> $\hat{y} = 101.2 + 10.0175*13 \approx 231.5$
>
> A projeÃ§Ã£o para o trimestre 13 Ã© de aproximadamente 231.5 unidades.
>
> ```python
> import numpy as np
> from sklearn.linear_model import LinearRegression
>
> x = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]).reshape((-1, 1))
> y = np.array([100, 110, 120, 135, 145, 160, 170, 185, 195, 210, 225, 240])
>
> model = LinearRegression()
> model.fit(x, y)
>
> a = model.intercept_
> b = model.coef_[0]
> print(f"Intercepto a: {a}")
> print(f"InclinaÃ§Ã£o b: {b}")
>
> x_future = np.array([13]).reshape((-1, 1))
> y_future = model.predict(x_future)
> print(f"PrevisÃ£o para o trimestre 13: {y_future[0]}")
> ```
>
> A saÃ­da do cÃ³digo Ã©:
> ```
> Intercepto a: 101.22727272727274
> InclinaÃ§Ã£o b: 10.017543859649123
> PrevisÃ£o para o trimestre 13: 231.45532291666668
> ```
>
> Este exemplo numÃ©rico demonstra o cÃ¡lculo dos coeficientes de regressÃ£o a e b usando a fÃ³rmula de mÃ­nimos quadrados e a aplicaÃ§Ã£o do modelo resultante para fazer uma previsÃ£o. O intercepto a (aproximadamente 101.2) representa a demanda no tempo inicial (trimestre 0, que estÃ¡ fora dos dados), enquanto a inclinaÃ§Ã£o b (aproximadamente 10.0175) representa o aumento mÃ©dio nas vendas por trimestre. A previsÃ£o para o trimestre 13 Ã© aproximadamente 231.5 unidades.

### AplicaÃ§Ãµes PrÃ¡ticas da ProjeÃ§Ã£o Linear de TendÃªncia
A projeÃ§Ã£o linear de tendÃªncia Ã© Ãºtil para:

1.  **PrevisÃµes de longo prazo:** Fornece uma estimativa da tendÃªncia geral da demanda, permitindo planejamento estratÃ©gico e alocaÃ§Ã£o de recursos a longo prazo.
2.  **AvaliaÃ§Ã£o da taxa de crescimento/declÃ­nio:** Permite quantificar a taxa de mudanÃ§a na demanda, fornecendo informaÃ§Ãµes importantes para a tomada de decisÃµes.
3.  **Base para outros modelos:** A projeÃ§Ã£o linear pode ser utilizada como componente de modelos mais complexos, como modelos que consideram a sazonalidade (como discutido na seÃ§Ã£o anterior) e outros componentes da sÃ©rie temporal.

### LimitaÃ§Ãµes e ConsideraÃ§Ãµes Importantes

Embora seja uma tÃ©cnica Ãºtil, a projeÃ§Ã£o linear de tendÃªncia possui limitaÃ§Ãµes importantes:
1. **Assume uma relaÃ§Ã£o linear:** Assume que a relaÃ§Ã£o entre tempo e demanda Ã© linear, o que pode nÃ£o ser verdade em muitos casos reais. Se os dados apresentarem uma relaÃ§Ã£o nÃ£o linear, modelos polinomiais podem ser mais apropriados.
2. **NÃ£o considera sazonalidade ou outros fatores:** A projeÃ§Ã£o linear de tendÃªncia nÃ£o leva em consideraÃ§Ã£o variaÃ§Ãµes sazonais, ciclos ou outros fatores externos que podem afetar a demanda.
3. **SensÃ­vel a outliers:** Como a projeÃ§Ã£o linear Ã© uma tÃ©cnica baseada em mÃ­nimos quadrados, ela Ã© sensÃ­vel a outliers e valores extremos nos dados histÃ³ricos.
4. **Incerteza da extrapolaÃ§Ã£o:** A extrapolaÃ§Ã£o da linha de tendÃªncia para perÃ­odos muito distantes do intervalo dos dados histÃ³ricos pode levar a previsÃµes imprecisas, principalmente devido a mudanÃ§as nÃ£o capturadas pelo modelo linear.

**ObservaÃ§Ã£o:** Ã‰ importante ressaltar que a projeÃ§Ã£o linear de tendÃªncia Ã© mais apropriada para cenÃ¡rios nos quais a demanda tem uma tendÃªncia clara de longo prazo que se aproxima de uma reta, mas pode nÃ£o ser adequada para cenÃ¡rios em que a demanda tem um padrÃ£o cÃ­clico ou sazonal, ou para previsÃµes em um horizonte de tempo muito grande.

**ProposiÃ§Ã£o 1:** A sensibilidade da regressÃ£o linear a outliers, devido ao mÃ©todo dos mÃ­nimos quadrados, pode ser mitigada atravÃ©s da utilizaÃ§Ã£o de mÃ©todos de regressÃ£o robustos.

*DemonstraÃ§Ã£o:*
I.  O mÃ©todo dos mÃ­nimos quadrados (utilizado na regressÃ£o linear) minimiza a soma dos quadrados dos resÃ­duos, dando um peso desproporcional aos outliers.
II. MÃ©todos de regressÃ£o robustos, como a regressÃ£o de Huber ou a regressÃ£o de Theil-Sen, reduzem o peso de outliers no cÃ¡lculo da regressÃ£o, tornando o modelo menos sensÃ­vel a valores extremos.
III. Portanto, a utilizaÃ§Ã£o desses mÃ©todos pode mitigar a sensibilidade da projeÃ§Ã£o linear a outliers. $\blacksquare$

> ğŸ’¡ **Exemplo NumÃ©rico:**
> Vamos analisar a sensibilidade da regressÃ£o linear a outliers usando os dados do exemplo anterior, introduzindo um outlier.
>
> **Dados originais:**
> ```
> x = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]).reshape((-1, 1))
> y = np.array([100, 110, 120, 135, 145, 160, 170, 185, 195, 210, 225, 240])
> ```
>
> **Dados com outlier:**
> Vamos substituir o valor da demanda no trimestre 6 (160) por um outlier (250).
> ```
> y_outlier = np.array([100, 110, 120, 135, 145, 250, 170, 185, 195, 210, 225, 240])
> ```
>
> **ComparaÃ§Ã£o dos resultados:**
> ```python
> import numpy as np
> from sklearn.linear_model import LinearRegression
> import matplotlib.pyplot as plt
>
> # Dados originais
> x = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]).reshape((-1, 1))
> y = np.array([100, 110, 120, 135, 145, 160, 170, 185, 195, 210, 225, 240])
>
> # Dados com outlier
> y_outlier = np.array([100, 110, 120, 135, 145, 250, 170, 185, 195, 210, 225, 240])
>
> # Modelo com dados originais
> model = LinearRegression()
> model.fit(x, y)
> a = model.intercept_
> b = model.coef_[0]
> y_pred = model.predict(x)
> print("Dados originais:")
> print(f"Intercepto a: {a}")
> print(f"InclinaÃ§Ã£o b: {b}")
>
> # Modelo com dados com outlier
> model_outlier = LinearRegression()
>model_outlier.fit(x, y_outlier)
> a_outlier = model_outlier.intercept_
> b_outlier = model_outlier.coef_[0]
> y_pred_outlier = model_outlier.predict(x)
> print("Dados com outlier:")
> print(f"Intercepto a (outlier): {a_outlier}")
> print(f"InclinaÃ§Ã£o b (outlier): {b_outlier}")
>
> # Plotagem
> plt.figure(figsize=(10, 6))
> plt.scatter(x, y, color='blue', label='Dados originais')
> plt.plot(x, y_pred, color='blue', linestyle='-', linewidth=2, label=f'RegressÃ£o (Original) y={a:.2f} + {b:.2f}x')
>
> plt.scatter(x, y_outlier, color='red', label='Dados com outlier')
> plt.plot(x, y_pred_outlier, color='red', linestyle='--', linewidth=2, label=f'RegressÃ£o (Outlier) y={a_outlier:.2f} + {b_outlier:.2f}x')
>
> plt.xlabel('Trimestre (x)')
> plt.ylabel('Demanda (y)')
> plt.title('Impacto de um Outlier na RegressÃ£o Linear')
> plt.legend()
> plt.grid(True)
> plt.show()
> ```
>
> A saÃ­da do cÃ³digo Ã©:
> ```
> Dados originais:
> Intercepto a: 101.22727272727274
> InclinaÃ§Ã£o b: 10.017543859649123
> Dados com outlier:
> Intercepto a (outlier): 85.3030303030303
> InclinaÃ§Ã£o b (outlier): 13.67032967032967
> ```
>
> O grÃ¡fico mostra que a linha de regressÃ£o dos dados com o outlier Ã© significativamente diferente da linha de regressÃ£o dos dados originais. O intercepto $a$ muda de aproximadamente 101.2 para 85.3, e a inclinaÃ§Ã£o $b$ aumenta de aproximadamente 10.0 para 13.7, demonstrando a sensibilidade do mÃ©todo dos mÃ­nimos quadrados a outliers. Isso valida a proposiÃ§Ã£o de que outliers podem distorcer a regressÃ£o linear.

### AnÃ¡lise de Fourier e TendÃªncias PeriÃ³dicas

Em alguns casos, mesmo quando a tendÃªncia de longo prazo Ã© linear, pode haver componentes periÃ³dicos sobrepostos Ã  tendÃªncia, que a tornam "oscilante". A **AnÃ¡lise de Fourier** Ã© uma ferramenta Ãºtil para identificar essas periodicidades, decompondo a tendÃªncia em componentes de frequÃªncia diferentes [^11]. Como visto nas seÃ§Ãµes anteriores, a anÃ¡lise de Fourier, atravÃ©s da transformada de Fourier, revela os componentes de frequÃªncia presentes na sÃ©rie temporal.

Se o espectro da transformada de Fourier da tendÃªncia (que Ã© isolada a partir dos dados por um modelo como regressÃ£o linear) mostrar um pico significativo em uma frequÃªncia diferente de zero, isso indica a presenÃ§a de um componente cÃ­clico ou periÃ³dico sobreposto Ã  tendÃªncia. Essa informaÃ§Ã£o pode ser Ãºtil para modelar a tendÃªncia com maior precisÃ£o ou para ajustar o modelo com componentes periÃ³dicos, como senoides ou cossenos [^11].

> ğŸ’¡ **Exemplo NumÃ©rico:**
> Suponha que os dados de vendas de um produto ao longo do tempo revelam uma tendÃªncia linear crescente, mas tambÃ©m apresentam flutuaÃ§Ãµes periÃ³dicas de longo prazo (um ciclo). Podemos ajustar um modelo de regressÃ£o linear para a tendÃªncia, obter o resÃ­duo (o que sobrou apÃ³s retirar a tendÃªncia) e, em seguida, aplicar a transformada de Fourier nos resÃ­duos, de forma a identificar qualquer periodicidade que nÃ£o foi capturada na tendÃªncia linear.
>
>
> 1. **Dados:**  Suponha que temos os seguintes dados de demanda, onde x Ã© o trimestre e y Ã© a demanda:
> ```
> x  | y
> -- | --
> 1  | 100
> 2  | 112
> 3  | 125
> 4  | 132
> 5  | 147
> 6  | 160
> 7  | 175
> 8  | 188
> 9  | 203
> 10 | 215
> 11 | 230
> 12 | 245
> ```
>
> 2. **Modelo Linear:** Ajustamos um modelo de regressÃ£o linear a esses dados:
>
>  $\hat{y} = 98.15 + 11.96x$
>
> 3. **ResÃ­duos:** Calculamos os resÃ­duos (a diferenÃ§a entre os valores reais e os previstos) para cada trimestre:
>
>  ```
> x  | y | y_hat | resÃ­duo
> -- | -- | ----- | -------
> 1  | 100 | 110.11 | -10.11
> 2  | 112 | 122.07 | -10.07
> 3  | 125 | 134.03 | -9.03
> 4  | 132 | 145.99 | -13.99
> 5  | 147 | 157.95 | -10.95
> 6  | 160 | 169.91 | -9.91
> 7  | 175 | 181.87 | -6.87
> 8  | 188 | 193.83 | -5.83
> 9  | 203 | 205.79 | -2.79
> 10 | 215 | 217.75 | -2.75
> 11 | 230 | 229.71 | 0.29
> 12 | 245 | 241.67 | 3.33
> ```
>
> 4. **Transformada de Fourier:** Aplicamos a transformada de Fourier aos resÃ­duos para identificar componentes periÃ³dicos.
>
> ```python
> import numpy as np
> import matplotlib.pyplot as plt
> import statsmodels.api as sm
>
> x = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12])
> y = np.array([100, 112, 125, 132, 147, 160, 175, 188, 203, 215, 230, 245])
>
> X = sm.add_constant(x)
> model = sm.OLS(y, X)
> results = model.fit()
> y_hat = results.fittedvalues
> residuos = y - y_hat
>
> N = len(residuos)
> fft_residuos = np.fft.fft(residuos)
> frequencies = np.fft.fftfreq(N, d=1)  # FrequÃªncias correspondentes
>
> plt.figure(figsize=(10, 5))
> plt.plot(frequencies[1:N//2], np.abs(fft_residuos)[1:N//2])
> plt.title('Espectro de FrequÃªncia dos ResÃ­duos')
> plt.xlabel('FrequÃªncia (ciclos por perÃ­odo)')
> plt.ylabel('Amplitude')
> plt.grid(True)
> plt.show()
>
> ```
>
>  O espectro de frequÃªncia (o grÃ¡fico que o cÃ³digo gera) pode mostrar um pico em uma frequÃªncia especÃ­fica, o que pode sugerir a presenÃ§a de um ciclo.
>
> Este processo nos permite identificar que hÃ¡, de fato, um componente periÃ³dico superposto Ã  tendÃªncia linear, e podemos incluir uma senoide com aquela frequÃªncia no modelo de previsÃ£o.
>
>  Neste exemplo, o cÃ³digo realiza uma regressÃ£o linear sobre os dados, calcula os resÃ­duos, aplica a transformada de Fourier e exibe o espectro de frequÃªncia. Se observarmos um pico em alguma frequÃªncia (alÃ©m de 0), podemos inferir que hÃ¡ um componente periÃ³dico nos resÃ­duos.

**CorolÃ¡rio 1.1:** A anÃ¡lise de resÃ­duos da regressÃ£o linear, seguida pela transformada de Fourier, permite identificar componentes periÃ³dicos que nÃ£o sÃ£o explicados pela tendÃªncia linear.

*DemonstraÃ§Ã£o:*
I. A regressÃ£o linear modela a tendÃªncia linear da sÃ©rie temporal.
II. Os resÃ­duos representam a diferenÃ§a entre os valores observados e os valores previstos pela regressÃ£o linear. Assim, resÃ­duos sÃ£o componentes que o modelo linear nÃ£o explica.
III. A transformada de Fourier aplicada nos resÃ­duos decompÃµe esses componentes em suas frequÃªncias.
IV. Um pico de frequÃªncia no espectro de Fourier dos resÃ­duos indica um componente periÃ³dico nÃ£o modelado pela regressÃ£o linear. $\blacksquare$

**CorolÃ¡rio 1.2:** A Transformada de Fourier permite identificar as periodicidades da tendÃªncia por meio da anÃ¡lise do espectro de frequÃªncia. A presenÃ§a de um pico, indica a presenÃ§a de uma componente periÃ³dica.

*DemonstraÃ§Ã£o:*
I. A transformada de Fourier decompÃµe uma sÃ©rie temporal (neste caso a tendÃªncia) em suas componentes de frequÃªncia.
II.  Se uma tendÃªncia linear tambÃ©m possui um componente periÃ³dico, a transformada de Fourier revelarÃ¡ essa componente atravÃ©s de um pico no espectro de frequÃªncia correspondente a esse perÃ­odo.
III. O pico no espectro de frequÃªncia indicarÃ¡ que uma parte da variaÃ§Ã£o nos dados da tendÃªncia Ã© causada por um padrÃ£o que se repete a uma frequÃªncia especÃ­fica. $\blacksquare$

**Lema 1:** A identificaÃ§Ã£o de componentes periÃ³dicos por meio da anÃ¡lise de Fourier nos resÃ­duos permite a construÃ§Ã£o de modelos mais precisos, ao considerar periodicidades que nÃ£o sÃ£o capturadas apenas pela tendÃªncia linear.

*DemonstraÃ§Ã£o:*
I.  Ao modelar a tendÃªncia de longo prazo com regressÃ£o linear, parte da variaÃ§Ã£o temporal Ã© capturada.
II.  Os resÃ­duos, que representam a variaÃ§Ã£o nÃ£o modelada pela regressÃ£o, podem conter componentes periÃ³dicos.
III. A anÃ¡lise de Fourier dos resÃ­duos revela as frequÃªncias desses componentes periÃ³dicos.
IV. A inclusÃ£o desses componentes periÃ³dicos, geralmente atravÃ©s de senoides ou cossenos, no modelo de previsÃ£o aumenta a precisÃ£o da previsÃ£o. $\blacksquare$

### ConclusÃ£o
As projeÃ§Ãµes lineares de tendÃªncia sÃ£o uma ferramenta fundamental para a anÃ¡lise de sÃ©ries temporais, fornecendo uma estimativa simples e direta da direÃ§Ã£o de longo prazo da demanda [^11]. Embora a tÃ©cnica tenha suas limitaÃ§Ãµes, principalmente quanto Ã  nÃ£o consideraÃ§Ã£o da sazonalidade e outras componentes, ela Ã© Ãºtil em diversos cenÃ¡rios e pode servir como base para modelos mais avanÃ§ados. A anÃ¡lise de Fourier Ã© uma ferramenta que pode ser usada para complementar a tÃ©cnica, fornecendo informaÃ§Ãµes sobre periodicidades na tendÃªncia que podem ser relevantes para a construÃ§Ã£o de modelos preditivos mais precisos. Ao analisar os fundamentos matemÃ¡ticos e estatÃ­sticos, a aplicaÃ§Ã£o prÃ¡tica, as limitaÃ§Ãµes e tÃ©cnicas para aprimoramento da projeÃ§Ã£o linear de tendÃªncia, o profissional estarÃ¡ melhor preparado para utilizar essa ferramenta de forma eficaz.

### ReferÃªncias
[^11]: CapÃ­tulo 3, p. 73
[^13]: CapÃ­tulo 3, p. 75
[^14]: CapÃ­tulo 3, p. 76
<!-- END -->
