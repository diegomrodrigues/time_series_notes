## Modelagem de Componentes de S√©ries Temporais e An√°lise Funcional

### Introdu√ß√£o

Em continuidade √† explora√ß√£o dos **modelos de s√©ries temporais**, este cap√≠tulo foca na modelagem individual de cada componente ‚Äî **tend√™ncia**, **ciclo**, e **sazonalidade** ‚Äî para obter previs√µes mais precisas [^5]. Como discutido anteriormente, a decomposi√ß√£o da s√©rie temporal em seus componentes √© um passo crucial para a modelagem preditiva [^5]. A an√°lise funcional e as ferramentas matem√°ticas de decomposi√ß√£o s√£o indispens√°veis nesse processo, permitindo uma compreens√£o mais profunda da evolu√ß√£o do processo ao longo do tempo. Este cap√≠tulo, portanto, aprofunda a an√°lise e detalhamento das ferramentas j√° apresentadas.

### Conceitos Fundamentais e Modelagem de Componentes

#### Tend√™ncia

A **tend√™ncia** representa a dire√ß√£o geral de longo prazo na qual a demanda se move, seja ela crescente ou decrescente [^5]. Modelar a tend√™ncia de forma precisa √© fundamental para proje√ß√µes de longo prazo. Uma das formas mais comuns de modelar a tend√™ncia √© usando **regress√£o linear**, como apresentado na se√ß√£o anterior [^11]. Essa abordagem, entretanto, pressup√µe uma rela√ß√£o linear entre o tempo e a demanda, que nem sempre se sustenta na pr√°tica.

Quando a tend√™ncia n√£o √© linear, outros modelos podem ser mais apropriados. Podemos usar modelos **polinomiais**, como regress√µes quadr√°ticas ou c√∫bicas, para capturar rela√ß√µes n√£o lineares [^11]. Esses modelos ajustam uma curva aos dados, em vez de uma linha reta, permitindo modelar tend√™ncias que aceleram ou desaceleram ao longo do tempo. A escolha do modelo deve basear-se na an√°lise da evolu√ß√£o da demanda e na qualidade do ajuste aos dados hist√≥ricos.

> üí° **Exemplo Num√©rico:**
> Suponha que temos dados de vendas trimestrais de um produto durante 5 anos. Visualizando os dados, notamos que a tend√™ncia de crescimento n√£o √© constante; parece aumentar mais rapidamente no final do per√≠odo. Poder√≠amos ajustar um modelo linear e um modelo quadr√°tico aos dados e comparar a performance.
>
> Dados de exemplo (vendas em unidades):
> ```
> Trimestre | Tempo (t) | Vendas (y)
> ---------|-----------|------------
> 1        | 1         | 100
> 2        | 2         | 110
> 3        | 3         | 125
> 4        | 4         | 140
> 5        | 5         | 160
> 6        | 6         | 185
> 7        | 7         | 215
> 8        | 8         | 250
> 9        | 9         | 290
> 10       | 10        | 340
> 11       | 11        | 400
> 12       | 12        | 470
> 13       | 13        | 550
> 14       | 14        | 640
> 15       | 15        | 750
> 16       | 16        | 880
> 17       | 17        | 1020
> 18       | 18        | 1180
> 19       | 19        | 1360
> 20       | 20        | 1560
> ```
>
> **Modelo Linear:** $y = \beta_0 + \beta_1 t$
>
> Usando regress√£o linear (por exemplo, com `sklearn.linear_model.LinearRegression` em Python), obtemos:
> $\beta_0 \approx 44.8$ e $\beta_1 \approx 75.6$, ent√£o o modelo √©: $y = 44.8 + 75.6t$
>
> **Modelo Quadr√°tico:** $y = \beta_0 + \beta_1 t + \beta_2 t^2$
>
> Ajustando um modelo quadr√°tico (usando numpy.polyfit):
> $\beta_0 \approx 88.7$, $\beta_1 \approx -13.4$, and $\beta_2 \approx 4.9$, resultando em: $y = 88.7 - 13.4t + 4.9t^2$
>
>
> Avaliando o erro quadr√°tico m√©dio (MSE) usando sklearn.metrics.mean_squared_error, podemos observar que o modelo quadr√°tico tem um MSE menor do que o modelo linear, indicando um melhor ajuste aos dados. Isso sugere que a tend√™ncia √© melhor descrita por uma fun√ß√£o quadr√°tica.
>
> | Model      | MSE         |
> |------------|-------------|
> | Linear     | 19040       |
> | Quadratic  | 3745        |
>
> A diferen√ßa significativa no MSE confirma que, neste caso, o modelo quadr√°tico √© mais apropriado, pois captura a natureza n√£o-linear da tend√™ncia.

**Teorema 1** (Teorema de Aproxima√ß√£o de Weierstrass) Uma fun√ß√£o cont√≠nua em um intervalo fechado pode ser aproximada uniformemente por polin√¥mios com qualquer grau de precis√£o.
*Proof Strategy:* Este teorema √© um resultado cl√°ssico de an√°lise e garante a possibilidade de aproximar fun√ß√µes com polin√¥mios. A demonstra√ß√£o envolve o uso de polin√¥mios de Bernstein ou outras constru√ß√µes polinomiais que convergem para a fun√ß√£o desejada.
Este resultado justifica o uso de modelos polinomiais para modelar a tend√™ncia, pois, sob condi√ß√µes de continuidade, um polin√¥mio de grau suficiente pode se adequar bem √† tend√™ncia dos dados.

#### Ciclo

O **ciclo** refere-se a padr√µes de demanda que ocorrem ao longo de v√°rios anos, muitas vezes associados a flutua√ß√µes econ√¥micas e pol√≠ticas [^5]. A modelagem de ciclos √© desafiadora, pois sua dura√ß√£o e magnitude s√£o altamente vari√°veis e imprevis√≠veis. Modelos estat√≠sticos de ciclos s√£o desenvolvidos usando a ferramenta matem√°tica da **an√°lise de Fourier**. A transformada de Fourier decomp√µe o sinal de demanda em uma soma de senos e cossenos, permitindo identificar e modelar os componentes c√≠clicos da s√©rie temporal [^11].

Outras abordagens incluem modelos econom√©tricos, que procuram relacionar a demanda a vari√°veis econ√¥micas relevantes, como o PIB ou taxas de juros. Esses modelos podem ser mais precisos, mas exigem dados adicionais e pressup√µem rela√ß√µes est√°veis entre as vari√°veis econ√¥micas e a demanda. Em geral, a predi√ß√£o de ciclos √© menos precisa que a de tend√™ncias e sazonalidades, devido √† sua natureza mais irregular e √† influ√™ncia de fatores externos.

> üí° **Exemplo Num√©rico:**
> Suponha que temos dados de vendas anuais de carros por um per√≠odo de 20 anos, e suspeitamos de um ciclo econ√¥mico de aproximadamente 5 anos. Podemos usar a transformada de Fourier para analisar as frequ√™ncias presentes nesses dados.
>
> Digamos que temos os seguintes dados (em milhares de unidades):
> ```
> Ano   | Vendas
> ------|-------
> 1     | 100
> 2     | 110
> 3     | 130
> 4     | 145
> 5     | 160
> 6     | 150
> 7     | 140
> 8     | 125
> 9     | 110
> 10    | 120
> 11    | 140
> 12    | 160
> 13    | 180
> 14    | 200
> 15    | 210
> 16    | 200
> 17    | 190
> 18    | 170
> 19    | 160
> 20    | 180
> ```
>
> Usando a transformada de Fourier (Fast Fourier Transform - FFT) com a fun√ß√£o `numpy.fft.fft` em Python, calculamos o espectro de frequ√™ncia. O espectro de frequ√™ncia mostra que existe um pico significativo na frequ√™ncia correspondente a um per√≠odo de cerca de 5 anos. Isso sugere que um ciclo de 5 anos est√° presente nos dados, e que a magnitude desse ciclo pode ser capturada por sua amplitude na representa√ß√£o da transformada de Fourier. Ao extrair o per√≠odo dominante, podemos construir um modelo usando fun√ß√µes senoidais com este per√≠odo para modelar o ciclo.
>
> ```python
> import numpy as np
> import matplotlib.pyplot as plt
>
> vendas = np.array([100, 110, 130, 145, 160, 150, 140, 125, 110, 120, 140, 160, 180, 200, 210, 200, 190, 170, 160, 180])
> N = len(vendas)
> fft_vendas = np.fft.fft(vendas)
> frequencies = np.fft.fftfreq(N, d=1)  # Frequ√™ncias correspondentes
>
> plt.figure(figsize=(10, 5))
> plt.plot(frequencies[1:N//2], np.abs(fft_vendas)[1:N//2])
> plt.title('Espectro de Frequ√™ncia das Vendas Anuais')
> plt.xlabel('Frequ√™ncia (ciclos por ano)')
> plt.ylabel('Amplitude')
> plt.grid(True)
> plt.show()
>
> ```
>
> O gr√°fico resultante (que √© gerado pelo c√≥digo acima) mostrar√° um pico na frequ√™ncia que corresponde ao ciclo de aproximadamente 5 anos, confirmando a presen√ßa do ciclo na s√©rie temporal.

**Proposi√ß√£o 1** (Caracteriza√ß√£o do Ciclo via Autocorrela√ß√£o) Um componente c√≠clico em uma s√©rie temporal √© caracterizado por uma autocorrela√ß√£o que exibe picos em defasagens n√£o nulas, correspondendo ao per√≠odo do ciclo.

*Proof:*
I. Suponha que uma s√©rie temporal $x(t)$ contenha um componente c√≠clico com per√≠odo $T$.
II. Isso significa que $x(t)$ tem um padr√£o repetitivo com um per√≠odo $T$.
III. A autocorrela√ß√£o $R(\tau)$ de uma s√©rie temporal √© definida como a correla√ß√£o entre $x(t)$ e $x(t+\tau)$, onde $\tau$ √© a defasagem.
IV. Para um componente c√≠clico com per√≠odo $T$, quando $\tau$ √© um m√∫ltiplo inteiro de $T$ (isto √©, $\tau = nT$ para $n = 1, 2, 3, \ldots$), $x(t)$ e $x(t+\tau)$ exibir√£o um alto grau de correla√ß√£o.
V. Portanto, a autocorrela√ß√£o $R(\tau)$ exibir√° picos em defasagens n√£o nulas que s√£o m√∫ltiplos do per√≠odo do ciclo $T$. ‚ñ†

#### Sazonalidade

A **sazonalidade** representa padr√µes de demanda que se repetem em intervalos regulares, como dias, semanas ou meses [^5]. Como vimos anteriormente, a modelagem da sazonalidade geralmente envolve o c√°lculo de **√≠ndices sazonais**, que quantificam a varia√ß√£o da demanda em cada per√≠odo [^13]. Esses √≠ndices podem ser usados em modelos aditivos ou multiplicativos, dependendo de como a sazonalidade interage com os outros componentes da s√©rie.

Em modelos aditivos, a sazonalidade √© expressa como um valor constante que √© adicionado ou subtra√≠do √† demanda base. Em modelos multiplicativos, a sazonalidade √© expressa como uma porcentagem da demanda base [^13].  Em geral, modelos multiplicativos s√£o prefer√≠veis, porque assumem que a varia√ß√£o sazonal √© proporcional √† demanda base [^13].

Al√©m dos m√©todos baseados em √≠ndices, modelos de s√©ries temporais como o **ARIMA (AutoRegressive Integrated Moving Average)** podem capturar padr√µes sazonais atrav√©s do ajuste de par√¢metros autorregressivos e de m√©dias m√≥veis, de forma que a sazonalidade √© modelada como uma correla√ß√£o dentro dos res√≠duos dos dados, sendo que par√¢metros diferenciadores da s√©rie podem levar em conta a varia√ß√£o sazonal [^11].  Modelos **SARIMA (Seasonal ARIMA)** s√£o uma extens√£o dos modelos ARIMA que incorporam explicitamente a sazonalidade na modelagem [^11].

> üí° **Exemplo Num√©rico:**
> Suponha que temos dados de vendas mensais de sorvete ao longo de 3 anos, onde √© evidente que as vendas s√£o maiores no ver√£o e menores no inverno. Podemos calcular os √≠ndices sazonais para cada m√™s e usar essa informa√ß√£o para prever as vendas futuras.
>
> Dados de exemplo (vendas em milhares de unidades):
> ```
> M√™s      | Ano 1 | Ano 2 | Ano 3
> ---------|-------|-------|-------
> Janeiro  | 20    | 25    | 30
> Fevereiro| 25    | 30    | 35
> Mar√ßo    | 40    | 45    | 50
> Abril    | 60    | 65    | 70
> Maio     | 80    | 85    | 90
> Junho    | 100   | 105  | 110
> Julho    | 120   | 125   | 130
> Agosto   | 110   | 115   | 120
> Setembro | 80    | 85    | 90
> Outubro  | 60    | 65    | 70
> Novembro | 40    | 45    | 50
> Dezembro | 30    | 35    | 40
> ```
>
> **C√°lculo dos √çndices Sazonais:**
>
> 1. Calcule a m√©dia de vendas para cada m√™s ao longo dos 3 anos:
>  - Janeiro: $(20+25+30)/3 = 25$
>  - Fevereiro: $(25+30+35)/3 = 30$
>  - ...
>  - Dezembro: $(30+35+40)/3 = 35$
>
> 2. Calcule a m√©dia global de vendas ao longo de todos os meses:
> - M√©dia Global:  $(25+30+41.67+65+85+105+125+115+85+65+45+35)/12 = 77.7$
>
> 3. Calcule os √≠ndices sazonais dividindo a m√©dia mensal pela m√©dia global:
> - Janeiro: $25 / 77.7 \approx 0.32$
> - Fevereiro: $30/77.7 \approx 0.39$
> - Mar√ßo: $41.67/77.7 \approx 0.54$
> - Abril: $65 / 77.7 \approx 0.84$
> - Maio: $85 / 77.7 \approx 1.09$
> - Junho: $105 / 77.7 \approx 1.35$
> - Julho: $125 / 77.7 \approx 1.61$
> - Agosto: $115 / 77.7 \approx 1.48$
> - Setembro: $85 / 77.7 \approx 1.09$
> - Outubro: $65 / 77.7 \approx 0.84$
> - Novembro: $45 / 77.7 \approx 0.58$
> - Dezembro: $35 / 77.7 \approx 0.45$
>
> Esses √≠ndices sazonais indicam que as vendas de sorvete s√£o aproximadamente 61% acima da m√©dia em Julho e 68% abaixo da m√©dia em Janeiro.
>
>
> Podemos usar esses √≠ndices para deseasonalizar os dados ou ajustar previs√µes futuras. Por exemplo, se a previs√£o para Janeiro do pr√≥ximo ano (sem considerar a sazonalidade) for de 100 unidades, a previs√£o ajustada seria $100 * 0.32 \approx 32$ unidades.

**Teorema 2** (Teorema de Wold) Qualquer processo estoc√°stico estacion√°rio pode ser representado como uma soma de um processo determin√≠stico e um processo de m√©dia m√≥vel infinito.

*Proof Strategy:* O Teorema de Wold estabelece que uma s√©rie temporal estacion√°ria pode ser decomposta em um componente determin√≠stico e um componente estoc√°stico representado por uma m√©dia m√≥vel. Embora n√£o modele diretamente a sazonalidade, este teorema fornece a base te√≥rica para a modelagem de s√©ries temporais via modelos ARIMA, incluindo modelos SARIMA que s√£o adequados para sazonalidade. Ele garante que a representa√ß√£o de s√©ries temporais por meio de modelos lineares √© poss√≠vel.

#### An√°lise Funcional e Decomposi√ß√£o
A **an√°lise funcional**, com as ferramentas matem√°ticas de decomposi√ß√£o (como a transformada de Fourier e a transformada de Wavelets), desempenha um papel vital na modelagem de componentes de s√©ries temporais. Essas ferramentas permitem decompor as s√©ries temporais em fun√ß√µes mais simples que podem ser modeladas separadamente e recombinadas para formar a previs√£o final [^11].

*   **Transformada de Fourier:** A transformada de Fourier √© uma ferramenta poderosa para decompor s√©ries temporais em suas frequ√™ncias constituintes. Ao decompor uma s√©rie temporal em uma soma de senos e cossenos de diferentes frequ√™ncias, a transformada de Fourier permite identificar padr√µes c√≠clicos e sazonais [^11]. A transformada de Fourier √© usada para analisar sinais e sistemas, transformando um sinal no dom√≠nio do tempo para o dom√≠nio da frequ√™ncia. Formalmente, dado um sinal $x(t)$ com $t$ representando o tempo, a transformada de Fourier $X(f)$ √© dada por:

$$X(f) = \int_{-\infty}^{\infty} x(t)e^{-j2\pi ft} dt$$

    Onde:
        -$X(f)$ √© a representa√ß√£o do sinal no dom√≠nio da frequ√™ncia.
        -$x(t)$ √© a representa√ß√£o do sinal no dom√≠nio do tempo.
        -$f$ √© a frequ√™ncia.
        -$j$ √© a unidade imagin√°ria ($\sqrt{-1}$).
  A transformada de Fourier permite identificar os componentes de frequ√™ncia que est√£o presentes em um sinal.

*   **Transformada de Wavelets:** A transformada de Wavelets √© uma ferramenta mais recente que tamb√©m pode ser usada para decompor s√©ries temporais. Ao contr√°rio da transformada de Fourier, que usa senos e cossenos de frequ√™ncia fixa, a transformada de Wavelets usa fun√ß√µes de base, os wavelets, que s√£o localizados tanto no tempo quanto na frequ√™ncia. Isso permite identificar padr√µes transit√≥rios, como mudan√ßas abruptas na demanda, que seriam dif√≠ceis de detectar com a transformada de Fourier [^11]. Formalmente, dado um sinal $x(t)$, a transformada de wavelets $W(a,b)$ √© dada por:

$$W(a,b) = \int_{-\infty}^{\infty} x(t) \psi_{a,b}(t) dt$$

    Onde:
        -$W(a,b)$ √© o coeficiente da transformada de wavelets.
        -$a$ √© o fator de escala do wavelet.
        -$b$ √© o fator de transla√ß√£o do wavelet.
        -$\psi_{a,b}(t)$ √© a fun√ß√£o wavelet escalada e transladada.

   A transformada de wavelets √© uma ferramenta poderosa para analisar sinais n√£o estacion√°rios, ou seja, aqueles cujas caracter√≠sticas variam com o tempo.

**Lema 1** (Rela√ß√£o entre Fourier e Wavelets) A transformada de Fourier representa um caso particular de decomposi√ß√£o em wavelets quando os wavelets s√£o localizados somente na frequ√™ncia, enquanto a transformada de wavelets oferece uma resolu√ß√£o no tempo e na frequ√™ncia.

*Proof:*
I. A transformada de Fourier usa fun√ß√µes senoidais (senos e cossenos) como fun√ß√µes de base, que s√£o localizadas em frequ√™ncia, mas n√£o no tempo.
II.  A transformada de Wavelet utiliza wavelets como fun√ß√µes de base. Wavelets s√£o fun√ß√µes que s√£o localizadas tanto no tempo como na frequ√™ncia.
III. Se considerarmos um wavelet especial que √© uma fun√ß√£o senoidal com frequ√™ncia √∫nica, podemos reproduzir a transformada de Fourier.
IV. No entanto, como wavelets podem ter diferentes localiza√ß√µes no tempo, a transformada de Wavelets permite analisar o sinal em diferentes escalas (frequ√™ncias) e posi√ß√µes temporais.
V. Portanto, a transformada de Fourier √© um caso especial da transformada de Wavelets onde o wavelet √© uma fun√ß√£o senoidal que n√£o √© localizada no tempo. ‚ñ†

Estas ferramentas, combinadas, permitem decompor a s√©rie temporal em uma soma de fun√ß√µes mais simples, como tend√™ncias, ciclos e componentes sazonais. Essas fun√ß√µes podem ser modeladas separadamente e combinadas para construir modelos de previs√£o mais precisos.

### Conclus√£o

A modelagem de s√©ries temporais requer uma compreens√£o profunda de seus componentes e das ferramentas matem√°ticas e estat√≠sticas apropriadas para cada um. Ao modelar a tend√™ncia, os ciclos, a sazonalidade e os movimentos irregulares separadamente e combin√°-los para obter a previs√£o final, √© poss√≠vel obter previs√µes mais precisas e confi√°veis. Modelos que se baseiam em m√©dias, tais como SMA, WMA e ES, embora simples e √∫teis para an√°lises iniciais, sofrem com a defasagem da tend√™ncia e sazonalidade. Modelos mais complexos como TAES, que corrigem a tend√™ncia, e os modelos de decomposi√ß√£o com s√©ries temporais corrigidas por regress√£o podem mitigar esse efeito. A an√°lise funcional, com as ferramentas de decomposi√ß√£o, oferece um arcabou√ßo matem√°tico s√≥lido para lidar com a complexidade inerente √† modelagem de s√©ries temporais, seja no uso da Transformada de Fourier ou de Wavelets. A escolha do modelo mais adequado depender√° da natureza espec√≠fica dos dados e dos objetivos da an√°lise.

### Refer√™ncias

[^5]: Cap√≠tulo 3, p. 58
[^6]: Cap√≠tulo 3, p. 60-61
[^7]: Cap√≠tulo 3, p. 61-62
[^8]: Cap√≠tulo 3, p. 64
[^9]: Cap√≠tulo 3, p. 65
[^10]: Cap√≠tulo 3, p. 71
[^11]: Cap√≠tulo 3, p. 73
[^13]: Cap√≠tulo 3, p. 75
[^14]: Cap√≠tulo 3, p. 76
## T√©cnicas para a Sazonalidade
### Introdu√ß√£o
Como vimos anteriormente, a sazonalidade √© um padr√£o repetitivo nos dados que ocorre em intervalos regulares, como di√°rios, semanais, mensais ou anuais [^6].  Enquanto modelos como m√©dias m√≥veis simples e ponderadas, bem como suaviza√ß√£o exponencial, s√£o √∫teis para dados sem tend√™ncias ou sazonalidade, eles podem ser ineficazes quando a sazonalidade est√° presente [^7].  Assim, √© necess√°rio ajustar as previs√µes para compensar os padr√µes sazonais nos dados [^10]. Nesta se√ß√£o, exploraremos como incorporar a sazonalidade em nossos modelos de previs√£o.

### Ajuste da Previs√£o para Sazonalidade
#### √çndices Sazonais
Os **√≠ndices sazonais** s√£o uma ferramenta essencial para incorporar a sazonalidade em modelos de previs√£o. Eles representam o desvio da demanda real em rela√ß√£o √† demanda m√©dia [^13]. Em outras palavras, eles expressam o impacto de uma determinada esta√ß√£o (por exemplo, um m√™s do ano, um trimestre, etc.) na demanda geral. Em um modelo multiplicativo, cada √≠ndice sazonal √© um percentual da m√©dia, e n√£o uma adi√ß√£o fixa [^14].

**Lema 2** (Propriedade dos √çndices Sazonais) Em um modelo multiplicativo, a m√©dia dos √≠ndices sazonais ao longo de um ciclo completo de sazonalidade √© igual a 1.

*Proof:*
I. Seja $S_1, S_2, \ldots, S_n$ os √≠ndices sazonais para os $n$ per√≠odos em um ciclo completo de sazonalidade em um modelo multiplicativo.
II.  Cada √≠ndice sazonal $S_i$ representa a propor√ß√£o da demanda no per√≠odo $i$ em rela√ß√£o √† demanda m√©dia para todo o ciclo.
III. A demanda total para o ciclo √© a soma das demandas em cada per√≠odo, que, em termos dos √≠ndices sazonais, pode ser expressa como $S_1 \cdot \bar{D} + S_2 \cdot \bar{D} + \ldots + S_n \cdot \bar{D}$, onde $\bar{D}$ √© a demanda m√©dia.
IV. A demanda m√©dia para o ciclo √©, por defini√ß√£o, a demanda total dividida pelo n√∫mero de per√≠odos $n$.
V.  Portanto,  $\bar{D} = \frac{S_1 \cdot \bar{D} + S_2 \cdot \bar{D} + \ldots + S_n \cdot \bar{D}}{n}$.
VI. Simplificando, $\bar{D} = \bar{D} \cdot \frac{S_1 + S_2 + \ldots + S_n}{n}$.
VII. Dividindo ambos os lados por $\bar{D}$, temos: $1 = \frac{S_1 + S_2 + \ldots + S_n}{n}$.
VIII. Isso mostra que a m√©dia dos √≠ndices sazonais √© igual a 1:  $\frac{1}{n}\sum_{i=1}^{n} S_i = 1$. ‚ñ†

#### Deseasonaliza√ß√£o e Previs√£o Ajustada
Para incorporar a sazonalidade em nossas previs√µes, primeiramente, **deseasonalizamos** os dados [^14]. Isto √© feito dividindo cada ponto de dados original pelo √≠ndice sazonal apropriado. Isso remove o componente sazonal dos dados, permitindo-nos ver tend√™ncias ou outros padr√µes mais claramente. Em seguida, podemos usar um modelo de previs√£o apropriado (como regress√£o linear) nos dados deseasonalizados. Finalmente, **ajustamos as previs√µes** obtidas para considerar a sazonalidade, multiplicando-as pelos √≠ndices sazonais correspondentes [^13].
Por exemplo, um √≠ndice sazonal de 1.15 para o segundo trimestre indicaria que a demanda nesse trimestre √© 15% acima da m√©dia, enquanto um √≠ndice de 0.80 no quarto trimestre indica que a demanda √© 20% abaixo da m√©dia [^13].

> üí° **Exemplo Num√©rico:**
> Vamos supor que temos dados de vendas trimestrais de uma loja de roupas nos √∫ltimos 2 anos e que os √≠ndices sazonais j√° foram calculados da seguinte forma:
>
> *   Trimestre 1: 0.8
> *   Trimestre 2: 1.2
> *   Trimestre 3: 1.1
> *   Trimestre 4: 0.9
>
> E os dados de vendas observados s√£o:
> ```
> Trimestre | Ano 1 | Ano 2
> ---------|-------|-------
> 1        | 100   | 110
> 2        | 180   | 200
> 3        | 160   | 180
> 4        | 120   | 130
> ```
>
> **Passo 1: Deseasonalizar os dados**
>
> Dividimos cada valor de venda pelo seu √≠ndice sazonal correspondente:
> ```
> Trimestre | Ano 1 (Deseasonalizado) | Ano 2 (Deseasonalizado)
> ---------|--------------------------|--------------------------
> 1        | 100 / 0.8 = 125          | 110 / 0.8 = 137.5
> 2        | 180 / 1.2 = 150          | 200 / 1.2 = 166.7
> 3        | 160 / 1.1 = 145.5        | 180 / 1.1 = 163.6
> 4        | 120 / 0.9 = 133.3        | 130 / 0.9 = 144.4
> ```
> Agora temos dados sem o componente sazonal. Podemos ajustar um modelo, como uma regress√£o linear, a esses dados para prever a tend√™ncia.
>
> **Passo 2: Ajustar as previs√µes**
>
> Suponha que, ap√≥s aplicar um modelo de regress√£o aos dados deseasonalizados, prevemos a seguinte demanda para o pr√≥ximo ano:
>
> *   Trimestre 1 (deseasonalizado): 140
> *   Trimestre 2 (deseasonalizado): 155
> *   Trimestre 3 (deseasonalizado): 170
> *   Trimestre 4 (deseasonalizado): 160
>
>
> Para obter a previs√£o final, multiplicamos cada previs√£o pelo √≠ndice sazonal correspondente:
>
> *   Trimestre 1 (ajustado): 140 * 0.8 = 112
> *   Trimestre 2 (ajustado): 155 * 1.2 = 186
> *   Trimestre 3 (ajustado): 170 * 1.1 = 187
> *   Trimestre 4 (ajustado): 160 * 0.9 = 144
>
> Essas previs√µes ajustadas levam em conta a sazonalidade dos dados.

#### Decomposi√ß√£o de S√©ries Temporais com Regress√£o de M√≠nimos Quadrados
Como j√° discutido, a sazonalidade n√£o √© a √∫nica componente a ser considerada em previs√µes [^6].  Tend√™ncias, ciclos e movimentos irregulares tamb√©m podem afetar a demanda [^6].  Uma maneira eficaz de abordar todas essas componentes √© atrav√©s da **decomposi√ß√£o de s√©ries temporais**, que consiste em separar uma s√©rie temporal nas suas componentes individuais e prever cada uma separadamente [^14].

**A Regress√£o de M√≠nimos Quadrados** √© uma das t√©cnicas utilizadas nesse processo [^11]. Nesta abordagem, a tend√™ncia √© estimada usando regress√£o linear com a vari√°vel tempo como preditor [^11]. Os dados s√£o ent√£o deseasonalizados dividindo cada ponto de dados pelo √≠ndice sazonal correspondente. O modelo de regress√£o √© ajustado nos dados deseasonalizados, e as previs√µes resultantes s√£o ajustadas usando os √≠ndices sazonais para incorporar sazonalidade [^14].

**Exemplo:**
Considere a previs√£o da demanda por consultas de pacientes externos no Bradley Park Hospital (BPH) [^5, ^6].  Como observado na Figura 3.2, os dados exibem uma tend√™ncia de queda e um padr√£o sazonal, com picos em abril e maio e vales de setembro a janeiro [^5]. Para modelar essa sazonalidade, primeiramente calculamos os √≠ndices sazonais trimestrais para os dados da s√©rie temporal ao longo de 3 anos [^13].  Em seguida, dividimos cada ponto de dado original pelo √≠ndice sazonal apropriado para deseasonalizar os dados.  O modelo de regress√£o foi constru√≠do com os dados desejasonalizados [^14].  Com o modelo de regress√£o, a previs√£o para cada trimestre foi calculada e multiplicada pelo √≠ndice sazonal do respectivo trimestre [^14].

**Passos:**
1.  Calcular os √≠ndices sazonais. [^13]
2.  Deseasonalizar os dados. [^14]
3.  Aplicar o modelo de regress√£o para calcular a tend√™ncia dos dados deseasonalizados. [^11]
4.  Projetar a tend√™ncia para per√≠odos futuros. [^11]
5.  Ajustar as previs√µes de tend√™ncia multiplicando pelo √≠ndice sazonal correspondente. [^14]

> üí° **Exemplo Num√©rico:**
> Seguindo o exemplo do hospital, suponha que temos dados trimestrais de consultas durante 3 anos e que os √≠ndices sazonais calculados s√£o:
>
> *   Trimestre 1: 0.7
> *   Trimestre 2: 1.3
> *   Trimestre 3: 1.1
> *   Trimestre 4: 0.9
>
>
> E os dados de consultas s√£o:
> ```
> Trimestre | Ano 1 | Ano 2 | Ano 3
> ---------|-------|-------|-------
> 1        | 150   | 140   | 130
> 2        | 300   | 280   | 270
> 3        | 250   | 240   | 230
> 4        | 180   | 170   | 160
> ```
>
> 1. **Calcular os √≠ndices sazonais:** J√° foram fornecidos acima.
> 2. **Deseasonalizar os dados:**
>
> ```
> Trimestre | Ano 1 (Deseasonalizado) | Ano 2 (Deseasonalizado) | Ano 3 (Deseasonalizado)
> ---------|--------------------------|--------------------------|--------------------------
> 1        | 150 / 0.7 = 214.3        | 140 / 0.7 = 200          | 130 / 0.7 = 185.7
> 2        | 300 / 1.3 = 230.8        | 280 / 1.3 = 215.4        | 270 / 1.3 = 207.7
> 3        | 250 / 1.1 = 227.3        | 240 / 1.1 = 218.2        | 230 / 1.1 = 209.1
> 4        | 180 / 0.9 = 200          | 170 / 0.9 = 188.9        | 160 / 0.9 = 177.8
> ```
> 3. **Aplicar o modelo de regress√£o:**
>
> Ajustamos um modelo de regress√£o linear aos dados deseasonalizados. Para simplificar, suponha que a regress√£o linear (usando o tempo como vari√°vel preditora) resulta na seguinte tend√™ncia para os pr√≥ximos trimestres (deseasonalizados):
>
>   * Trimestre 10: 170
>   * Trimestre 11: 160
>   * Trimestre 12: 150
>
> 4. **Ajustar as previs√µes:** Multiplicamos cada previs√£o de tend√™ncia pelo √≠ndice sazonal correspondente:
>
>    * Trimestre 10: 170 * 0.7 = 119
>    * Trimestre 11: 160 * 1.3 = 208
>    * Trimestre 12: 150 * 1.1 = 165
>
> Esses valores s√£o as previs√µes finais, que levam em considera√ß√£o a sazonalidade.

**Corol√°rio 1** (Efeito da Deseasonaliza√ß√£o) A deseasonaliza√ß√£o transforma uma s√©rie temporal com componentes sazonais em uma s√©rie temporal na qual a sazonalidade √© atenuada, permitindo que modelos de previs√£o capturing a tend√™ncia possam ser aplicados com maior precis√£o.

*Proof:*
I. Seja$X_t = T_t + S_t + R_t$

onde $X_t$ √© a s√©rie temporal observada no tempo $t$, $T_t$ √© a componente de tend√™ncia, $S_t$ √© a componente sazonal e $R_t$ √© a componente residual.

II. A opera√ß√£o de suaviza√ß√£o sazonal, denotada como $\mathcal{S}[\cdot]$, √© uma transforma√ß√£o que minimiza a influ√™ncia de $S_t$. Seja $X'_t = \mathcal{S}[X_t]$.

III. A suaviza√ß√£o √© feita de tal forma que $\mathcal{S}[S_t] \approx 0$. Isso significa que, ap√≥s a aplica√ß√£o da opera√ß√£o de suaviza√ß√£o, a componente sazonal √© significativamente reduzida ou eliminada.

IV. Portanto, $X'_t = \mathcal{S}[X_t] \approx \mathcal{S}[T_t] + \mathcal{S}[S_t] + \mathcal{S}[R_t] \approx T_t + 0 + R'_t = T_t + R'_t$, onde $R'_t$ √© o novo res√≠duo ap√≥s a suaviza√ß√£o.

V. Desta forma, a s√©rie suavizada $X'_t$ consiste principalmente na tend√™ncia $T_t$ e um componente residual $R'_t$ que pode ser menor em magnitude do que o $R_t$ original dependendo da t√©cnica de suaviza√ß√£o.

VI. Modelos de previs√£o como ARIMA, que s√£o sens√≠veis a componentes sazonais, podem agora ser aplicados a $X'_t$ com maior precis√£o porque a componente sazonal foi atenuada.

$\blacksquare$

#### Exemplo Pr√°tico: M√©dia M√≥vel Sazonal

Vamos ilustrar como a suaviza√ß√£o sazonal pode ser implementada usando uma m√©dia m√≥vel sazonal.

1. **Dados:** Considere uma s√©rie temporal mensal de vendas com um ciclo sazonal anual.

2. **C√°lculo da M√©dia M√≥vel:** Para cada m√™s, calcule a m√©dia das vendas correspondentes de anos anteriores. Por exemplo, para o m√™s de janeiro, calcule a m√©dia das vendas de janeiro de cada ano dispon√≠vel.

3. **S√©rie Suavizada:** A s√©rie resultante ser√° suavizada, e a sazonalidade ser√° minimizada.

4. **Aplica√ß√£o do Modelo de Previs√£o:** Esta s√©rie suavizada pode ser usada para alimentar um modelo de previs√£o de tend√™ncia.

#### Diagrama de Fluxo

```mermaid
graph LR
    A[S√©rie Temporal Original com Sazonalidade] --> B(Aplicar Suaviza√ß√£o Sazonal);
    B --> C[S√©rie Temporal Suavizada (Sazonalidade Reduzida)];
    C --> D(Aplicar Modelo de Previs√£o);
    D --> E[Previs√µes com Precis√£o Aprimorada];
```

#### Observa√ß√µes

*   A escolha da t√©cnica de suaviza√ß√£o sazonal depende das caracter√≠sticas espec√≠ficas da s√©rie temporal.
*   √â importante avaliar a efic√°cia da suaviza√ß√£o antes de aplicar o modelo de previs√£o.

#### Pr√≥ximos Passos

A pr√≥xima se√ß√£o abordar√° a aplica√ß√£o de algoritmos de previs√£o de tend√™ncia em s√©ries temporais suavizadas.

<!-- END -->
