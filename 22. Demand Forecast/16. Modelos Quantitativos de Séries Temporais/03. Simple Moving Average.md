## An√°lise Detalhada da M√©dia M√≥vel Simples (SMA) em Previs√£o de Demanda

### Introdu√ß√£o
Em continuidade aos t√≥picos anteriores sobre modelos de s√©ries temporais e m√©todos de previs√£o [^1, ^3], este cap√≠tulo se aprofunda na an√°lise da **M√©dia M√≥vel Simples (SMA)**. J√° vimos que a previs√£o de demanda √© um componente crucial no planejamento estrat√©gico e gest√£o de opera√ß√µes [^1], e que existem diversas abordagens para projetar valores futuros, com suas vantagens e limita√ß√µes. A SMA, como um dos m√©todos quantitativos mais b√°sicos [^5], desempenha um papel fundamental na compreens√£o de como modelos de s√©ries temporais podem suavizar ru√≠dos e projetar tend√™ncias futuras, mesmo que de forma simplificada. Este cap√≠tulo explorar√° detalhadamente os mecanismos da SMA, seus pressupostos, suas limita√ß√µes e as condi√ß√µes em que seu uso √© mais apropriado.

### Conceitos Fundamentais da M√©dia M√≥vel Simples (SMA)
A M√©dia M√≥vel Simples (SMA) √© uma t√©cnica de previs√£o que calcula a m√©dia da demanda em um n√∫mero espec√≠fico de per√≠odos passados para prever a demanda no per√≠odo seguinte [^5]. A f√≥rmula b√°sica para a SMA no per√≠odo *t* √© dada por:

$$ SMA_t = \frac{A_{t-1} + A_{t-2} + \ldots + A_{t-n}}{n} $$

onde:
*   $SMA_t$ √© a m√©dia m√≥vel simples para o per√≠odo *t*.
*   $A_{t-1}$, $A_{t-2}$, ..., $A_{t-n}$ s√£o os valores da demanda nos *n* per√≠odos anteriores.
*   *n* √© o n√∫mero de per√≠odos usados no c√°lculo da m√©dia m√≥vel [^5].

A SMA √© uma m√©dia aritm√©tica dos *n* valores de demanda mais recentes. √Ä medida que o tempo avan√ßa, um novo valor de demanda √© adicionado ao c√°lculo, enquanto o valor mais antigo √© descartado, criando assim uma "m√©dia m√≥vel". Este processo visa suavizar flutua√ß√µes aleat√≥rias e isolar tend√™ncias e padr√µes mais persistentes na s√©rie temporal.

Um aspecto fundamental da SMA √© a escolha do par√¢metro *n*, que representa o n√∫mero de per√≠odos a serem inclu√≠dos no c√°lculo da m√©dia. Um valor maior de *n* resulta em uma m√©dia mais est√°vel, que responde de forma mais lenta a mudan√ßas na demanda. Por outro lado, um valor menor de *n* torna a m√©dia mais responsiva a flutua√ß√µes recentes, mas tamb√©m mais suscet√≠vel a ru√≠dos aleat√≥rios [^4].

√â importante destacar que a SMA trata todos os dados dentro da janela de tempo *n* com igual peso, o que pode ser uma limita√ß√£o em cen√°rios onde os dados mais recentes s√£o mais relevantes para a previs√£o. Esta caracter√≠stica contrasta com modelos mais sofisticados, como a m√©dia m√≥vel ponderada (WMA) [^6] e a suaviza√ß√£o exponencial (ES) [^8], que podem atribuir pesos diferentes aos dados mais recentes ou mais antigos.

**Lema 1:** A SMA suaviza as flutua√ß√µes na s√©rie temporal, mas tamb√©m atrasa a detec√ß√£o de mudan√ßas na tend√™ncia.

*Prova*:
I.  A SMA calcula a m√©dia dos n valores mais recentes da s√©rie temporal, eliminando os extremos e suavizando o efeito de valores isolados.
II. Em uma s√©rie temporal com uma tend√™ncia de aumento ou diminui√ß√£o, a SMA atrasa a previs√£o pois ela √© uma m√©dia de valores passados. Quando h√° uma tend√™ncia, a m√©dia sempre ficar√° "atrasada" em rela√ß√£o ao valor corrente, seja ele crescente ou decrescente. Portanto, ela detecta mudan√ßas na tend√™ncia com atraso em rela√ß√£o ao valor corrente.
III. A m√©dia ponderada pode mitigar este problema atribuindo um peso maior a valores mais recentes. ‚ñ†

**Lema 1.1:** A SMA pode ser expressa como uma combina√ß√£o linear dos valores da s√©rie temporal.

*Prova:*
I. A f√≥rmula da SMA √© dada por $SMA_t = \frac{A_{t-1} + A_{t-2} + \ldots + A_{t-n}}{n}$.
II. Essa express√£o pode ser reescrita como $SMA_t = \frac{1}{n}A_{t-1} + \frac{1}{n}A_{t-2} + \ldots + \frac{1}{n}A_{t-n}$.
III. Portanto, $SMA_t$ √© uma combina√ß√£o linear dos valores de demanda $A_{t-1}, A_{t-2}, \ldots, A_{t-n}$, onde cada valor √© ponderado por $\frac{1}{n}$. ‚ñ†

**Corol√°rio 1.1:** A suaviza√ß√£o em um modelo de m√©dia m√≥vel √© inversamente proporcional √† capacidade do modelo de responder a mudan√ßas na tend√™ncia, e diretamente proporcional ao tamanho da janela de tempo *n*.

*Prova:*
I. Uma janela de tempo maior *n* significa que o modelo usa mais valores de dados hist√≥ricos.
II. O modelo atribui igual peso a todos os valores dentro desta janela, resultando em menor influ√™ncia dos valores mais recentes no c√°lculo da m√©dia.
III. A menor influ√™ncia dos valores mais recentes torna o modelo menos responsivo a mudan√ßas na tend√™ncia, o que aumenta a suaviza√ß√£o do mesmo.
IV.  Por outro lado, uma janela de tempo menor *n* torna o modelo mais sens√≠vel a mudan√ßas, e diminui a suaviza√ß√£o.
V.  Portanto, a suaviza√ß√£o do modelo √© inversamente proporcional a sua responsividade e diretamente proporcional a *n*. ‚ñ†

#### Exemplo Num√©rico Detalhado da SMA

Para ilustrar como a SMA funciona, consideremos uma s√©rie temporal de demanda semanal:

*   Semana 1: 20 unidades
*   Semana 2: 22 unidades
*   Semana 3: 25 unidades
*   Semana 4: 23 unidades
*   Semana 5: 28 unidades
*   Semana 6: 30 unidades
*   Semana 7: 27 unidades
*   Semana 8: 32 unidades
*   Semana 9: 35 unidades

Vamos calcular as previs√µes da SMA usando diferentes valores de *n*: 3 e 5.

*   **SMA com n=3:**

    *   $SMA_4 = (25 + 23 + 28) / 3 = 25.33$
    *   $SMA_5 = (23 + 28 + 30) / 3 = 27$
    *   $SMA_6 = (28 + 30 + 27) / 3 = 28.33$
    *   $SMA_7 = (30 + 27 + 32) / 3 = 29.67$
    *   $SMA_8 = (27 + 32 + 35) / 3 = 31.33$

*   **SMA com n=5:**

    *   $SMA_6 = (23 + 28 + 30 + 27 + 32) / 5 = 28$
    *   $SMA_7 = (28 + 30 + 27 + 32 + 35) / 5 = 30.4$

Observando os resultados, notamos que a SMA com *n=3* reage mais rapidamente √†s mudan√ßas na demanda, mas tamb√©m mostra maior volatilidade. A SMA com *n=5*, por outro lado, apresenta um comportamento mais suave e menos sens√≠vel √†s flutua√ß√µes de curto prazo.

> üí° **Exemplo Num√©rico:** Para visualizar o efeito de diferentes valores de *n*, considere um cen√°rio onde a demanda de um produto √© dada por: Semana 1: 10, Semana 2: 12, Semana 3: 15, Semana 4: 13, Semana 5: 16, Semana 6: 18, Semana 7: 17, Semana 8: 20. Vamos calcular a SMA com n=2 e n=4.
>
> *   **SMA com n=2:**
>   *   $SMA_3 = (12 + 15)/2 = 13.5$
>   *   $SMA_4 = (15 + 13)/2 = 14$
>   *   $SMA_5 = (13 + 16)/2 = 14.5$
>   *   $SMA_6 = (16 + 18)/2 = 17$
>   *   $SMA_7 = (18 + 17)/2 = 17.5$
>   *   $SMA_8 = (17 + 20)/2 = 18.5$
>
> *   **SMA com n=4:**
>   *   $SMA_5 = (12 + 15 + 13 + 16)/4 = 14$
>   *   $SMA_6 = (15 + 13 + 16 + 18)/4 = 15.5$
>   *   $SMA_7 = (13 + 16 + 18 + 17)/4 = 16$
>   *   $SMA_8 = (16 + 18 + 17 + 20)/4 = 17.75$
>
> Observe que a SMA com n=2 acompanha as flutua√ß√µes da demanda mais de perto, enquanto a SMA com n=4 √© mais suave, por√©m, responde mais lentamente √†s mudan√ßas. Isso demonstra o *trade-off* entre suaviza√ß√£o e responsividade.

#### Vantagens e Desvantagens da SMA
As principais vantagens da SMA incluem:

*   **Simplicidade:** √â uma t√©cnica f√°cil de entender e implementar, n√£o exigindo conhecimentos estat√≠sticos avan√ßados. O c√°lculo da SMA √© direto, n√£o demandando muitos recursos computacionais.
*   **Suaviza√ß√£o de Ru√≠do:** Reduz o impacto de flutua√ß√µes aleat√≥rias nos dados, expondo padr√µes mais persistentes na s√©rie temporal. A m√©dia, por defini√ß√£o, suaviza as varia√ß√µes nos dados.
*   **Facilidade de Interpreta√ß√£o:** As previs√µes s√£o f√°ceis de interpretar, pois s√£o simplesmente a m√©dia dos per√≠odos anteriores.

As principais desvantagens da SMA incluem:

*   **Atraso na Detec√ß√£o de Tend√™ncias:** A SMA reage lentamente a mudan√ßas na tend√™ncia, pois utiliza uma m√©dia de dados anteriores com pesos iguais [^1, ^4]. Em outras palavras, um aumento ou diminui√ß√£o na demanda n√£o √© imediatamente refletido nas previs√µes, levando a um atraso na adapta√ß√£o do modelo.
*   **Igual Peso a Dados Antigos:** Trata todos os per√≠odos dentro da janela de tempo com a mesma import√¢ncia, n√£o diferenciando dados recentes de dados mais antigos. Em muitos casos, os dados mais recentes s√£o mais relevantes para a previs√£o [^6, ^8].
*   **Necessidade de Escolher o Par√¢metro n:** A escolha do valor apropriado para *n* pode ser um desafio. Um valor muito baixo para *n* aumenta a volatilidade da previs√£o e a torna muito sens√≠vel a flutua√ß√µes aleat√≥rias, enquanto um valor muito alto para *n* suaviza muito a previs√£o e a torna menos responsiva a mudan√ßas na tend√™ncia, conforme discutido no Corol√°rio 1.1.

**Observa√ß√£o 1:** A escolha do par√¢metro *n* na SMA pode ser vista como um problema de *trade-off* entre suaviza√ß√£o e responsividade. Um *n* pequeno leva a alta responsividade, mas baixa suaviza√ß√£o, enquanto um *n* grande leva a alta suaviza√ß√£o, mas baixa responsividade. A escolha √≥tima de *n* depende das caracter√≠sticas espec√≠ficas da s√©rie temporal sob an√°lise, e pode envolver o uso de m√©tricas de avalia√ß√£o de previs√£o para otimizar os resultados.

#### Condi√ß√µes de Aplicabilidade da SMA

A SMA √© mais apropriada nas seguintes condi√ß√µes:

*   **Demanda Est√°vel:** Quando a demanda √© relativamente est√°vel e apresenta pouca ou nenhuma tend√™ncia, a SMA pode gerar previs√µes adequadas. Nesses casos, a suaviza√ß√£o da SMA √© uma vantagem, j√° que elimina o ru√≠do e melhora a previs√£o.
*   **Aus√™ncia de Sazonalidade e Ciclos:** A SMA n√£o √© capaz de capturar padr√µes sazonais ou c√≠clicos. Portanto, n√£o √© adequada para s√©ries temporais com essas caracter√≠sticas [^4].
*  **Previs√µes de Curto Prazo:** A SMA pode ser adequada para previs√µes de curto prazo quando a demanda √© relativamente est√°vel e as mudan√ßas s√£o m√≠nimas, mas perde precis√£o em proje√ß√µes de longo prazo devido √† sua baixa resposta a tend√™ncias.
*   **Benchmarking:** A SMA √© um bom ponto de partida e de compara√ß√£o para avaliar o desempenho de modelos mais complexos. O desempenho da SMA serve como um *benchmark* para a compara√ß√£o com modelos mais avan√ßados, indicando que um modelo mais complexo somente deve ser utilizado quando ele apresentar um desempenho melhor em termos de precis√£o.

#### M√©tricas de Avalia√ß√£o de Previs√£o com SMA
Avaliamos a precis√£o da previs√£o com a SMA usando m√©tricas como Desvio Absoluto M√©dio (MAD), Erro Quadr√°tico M√©dio (MSE) e Erro Percentual Absoluto M√©dio (MAPE) [^10, ^11, ^12], que foram definidos em detalhes nos cap√≠tulos anteriores.

**Proposi√ß√£o 2:** A m√©trica MAD √© menos sens√≠vel a *outliers*, enquanto a m√©trica MSE penaliza erros maiores, e a m√©trica MAPE fornece uma medida adimensional de erro, √∫til para comparar previs√µes de s√©ries temporais com diferentes magnitudes de demanda.

*Prova*:
I. O c√°lculo do MAD √© baseado na soma do valor absoluto das diferen√ßas entre as previs√µes e os valores reais, o que significa que *outliers* n√£o exercem uma influ√™ncia desproporcionalmente grande.
II. O c√°lculo do MSE √© baseado na soma do quadrado das diferen√ßas entre as previs√µes e os valores reais, o que significa que *outliers* com grande erro ter√£o um impacto muito maior na m√©trica, penalizando grandes desvios.
III. O c√°lculo do MAPE expressa as diferen√ßas entre os valores reais e as previs√µes como uma porcentagem da demanda real, resultando em uma m√©trica adimensional. Isso torna o MAPE √∫til para comparar diferentes s√©ries temporais ou diferentes modelos para a mesma s√©rie temporal.
IV. Portanto, as m√©tricas MAD, MSE e MAPE fornecem medidas complementares da precis√£o de um modelo. A escolha da m√©trica apropriada depende do contexto da an√°lise. ‚ñ†

Por exemplo, vamos calcular o MAD para a SMA (com n=3) e os dados dos exemplos num√©ricos anteriores:

Semana | Demanda Real | SMA (n=3) | |Erro Absoluto|
------- | ------------- | ----------| ------------- |
1     | 20 |  |
2     | 22 | |
3     | 25 | |
4     | 23 | 25.33 | |2.33|
5     | 28 | 27 | |1|
6     | 30 | 28.33 | |1.67|
7     | 27 | 29.67 | |2.67|
8    | 32 | 31.33 | |0.67|
9    | 35 | | |
MAD = (2.33+1+1.67+2.67+0.67) / 5 = 1.67

Este exemplo mostra como o MAD pode ser usado para avaliar o desempenho da SMA, indicando que, em m√©dia, o modelo tem um erro de 1.67 unidades. O MSE e o MAPE tamb√©m podem ser calculados da mesma forma.

> üí° **Exemplo Num√©rico:** Para demonstrar o c√°lculo de MAPE, vamos usar os dados do exemplo com n=2 e os seguintes valores: Semana 3: 15 (Real), Semana 4: 13 (Real), Semana 5: 16 (Real), Semana 6: 18 (Real), Semana 7: 17 (Real), Semana 8: 20 (Real). As previs√µes da SMA com n=2 foram: $SMA_3 = 13.5$, $SMA_4 = 14$, $SMA_5 = 14.5$, $SMA_6 = 17$, $SMA_7 = 17.5$, $SMA_8 = 18.5$.
>
> Vamos calcular o erro percentual absoluto para cada semana:
> *   Semana 3: $|(15 - 13.5) / 15| * 100 = 10\%$
> *   Semana 4: $|(13 - 14) / 13| * 100 = 7.69\%$
> *   Semana 5: $|(16 - 14.5) / 16| * 100 = 9.38\%$
> *   Semana 6: $|(18 - 17) / 18| * 100 = 5.56\%$
> *   Semana 7: $|(17 - 17.5) / 17| * 100 = 2.94\%$
> *   Semana 8: $|(20 - 18.5) / 20| * 100 = 7.5\%$
>
> O MAPE √© a m√©dia desses valores: $(10 + 7.69 + 9.38 + 5.56 + 2.94 + 7.5) / 6 = 7.18 \%$. Isso significa que, em m√©dia, o erro percentual absoluto do modelo √© de 7.18%.
>
> üí° **Exemplo Num√©rico:** Para comparar MAD, MSE e MAPE, vamos usar um exemplo mais simples com os seguintes dados: Demanda Real: [10, 12, 15, 13], Previs√£o SMA (n=2): [ , , 11, 13.5].
>
> *   **MAD:** $|15-11| + |13-13.5| = 4 + 0.5 = 4.5$. MAD = 4.5/2= 2.25
> *   **MSE:** $(15-11)^2 + (13-13.5)^2=16 + 0.25 = 16.25$. MSE = 16.25/2 = 8.125
> *   **MAPE:** $|(15-11)/15|*100 + |(13-13.5)/13|*100 = (0.2666+0.038)*100 = 30.46%. MAPE = 30.46/2= 15.23%
>
> A diferen√ßa nos resultados ilustra como cada m√©trica penaliza os erros de forma diferente. O MSE penaliza mais erros maiores, MAD d√° pesos iguais a todos erros e MAPE expressa o erro em porcentagem.

**Proposi√ß√£o 2.1:** A m√©trica MAPE n√£o √© apropriada para s√©ries temporais com demandas pr√≥ximas de zero, pois um pequeno erro absoluto em rela√ß√£o a uma demanda muito pequena pode resultar em um MAPE muito grande.

*Prova:*
I.  A f√≥rmula do MAPE √© dada por $MAPE = \frac{1}{m}\sum_{t=1}^{m} \left| \frac{A_t - F_t}{A_t} \right| \times 100$, onde $A_t$ √© o valor real e $F_t$ √© a previs√£o para o per√≠odo *t*, e *m* √© o n√∫mero de per√≠odos.
II. Se algum valor de $A_t$ for pr√≥ximo de zero, o termo $\left| \frac{A_t - F_t}{A_t} \right|$ ir√° resultar em um n√∫mero muito grande, mesmo que a diferen√ßa absoluta entre $A_t$ e $F_t$ seja pequena.
III. Portanto, a m√©trica MAPE se torna inst√°vel e pouco informativa para s√©ries temporais com demandas pr√≥ximas de zero. M√©tricas como MAD ou RMSE seriam mais adequadas nesses casos. ‚ñ†

### Conclus√£o

A M√©dia M√≥vel Simples (SMA) √© uma ferramenta fundamental para a previs√£o de s√©ries temporais, caracterizada por sua simplicidade e capacidade de suavizar ru√≠dos. No entanto, √© importante entender suas limita√ß√µes, principalmente sua dificuldade em capturar tend√™ncias e padr√µes sazonais, e sua resposta lenta a mudan√ßas na demanda. A escolha do par√¢metro *n* e da m√©trica de avalia√ß√£o de previs√£o correta s√£o cruciais para otimizar a precis√£o da SMA. Embora seja um m√©todo fundamental em qualquer estudo de s√©ries temporais, a SMA deve ser aplicada de forma criteriosa, considerando suas limita√ß√µes e a natureza dos dados em an√°lise. Em situa√ß√µes onde a demanda √© inst√°vel, ou onde h√° outros fatores que influenciam a demanda, modelos mais sofisticados como WMA, ES ou TAES, que ser√£o explorados em cap√≠tulos futuros, s√£o mais adequados.

### Refer√™ncias

[^1]: Cap√≠tulo 2, que aborda a import√¢ncia de formular estrat√©gias em diversas √°reas funcionais e como a previs√£o de demanda √© um elemento cr√≠tico.
[^3]: Trecho que introduz os modelos de s√©ries temporais como um m√©todo quantitativo para previs√£o de demanda.
[^4]: Trecho que aborda o equil√≠brio entre estabilidade e responsividade em um modelo de previs√£o.
[^5]: Trecho que define e explica a t√©cnica de M√©dia M√≥vel Simples (SMA).
[^6]: Trecho que define e explica a t√©cnica de M√©dia M√≥vel Ponderada (WMA).
[^8]: Trecho que define e explica a t√©cnica de Suaviza√ß√£o Exponencial (ES).
[^10]: Trecho que define e explica o Desvio Absoluto M√©dio (MAD).
[^11]: Trecho que define e explica o Erro Quadr√°tico M√©dio (MSE).
[^12]: Trecho que define e explica o Erro Percentual Absoluto M√©dio (MAPE).
<!-- END -->
