## TÃ©cnicas para Sazonalidade em SÃ©ries Temporais

### IntroduÃ§Ã£o
Este capÃ­tulo explora a importÃ¢ncia de se considerar a **sazonalidade** ao realizar previsÃµes em *sÃ©ries temporais*. Como vimos anteriormente, a sazonalidade representa variaÃ§Ãµes regulares nos dados que se repetem em intervalos fixos, como dias, semanas, meses ou trimestres [^5, 58]. Ignorar a sazonalidade pode levar a previsÃµes imprecisas e decisÃµes equivocadas. Este capÃ­tulo irÃ¡ aprofundar os conceitos apresentados, explicando como identificar, quantificar e ajustar modelos de previsÃ£o para sazonalidade.

### Conceitos Fundamentais
A **sazonalidade** Ã© definida como um padrÃ£o repetitivo nos dados de uma sÃ©rie temporal que ocorre em intervalos fixos e regulares [^58]. Ã‰ importante notar que a sazonalidade nÃ£o estÃ¡ necessariamente ligada a calendÃ¡rios tradicionais (estaÃ§Ãµes do ano) [^74], mas a qualquer variaÃ§Ã£o recorrente que se manifeste em intervalos regulares [^74]. Por exemplo, o nÃºmero de pacientes no pronto-socorro pode ser menor entre a meia-noite e 8h00 da manhÃ£ [^60]. O nÃºmero de fraturas de quadril atinge picos durante os meses de inverno [^60].

Para reproduzir os padrÃµes de dados passados em nossas projeÃ§Ãµes, precisamos decompor a sÃ©rie temporal em seus componentes [^59]. Os quatro componentes principais de uma sÃ©rie temporal sÃ£o: **tendÃªncia**, **ciclo**, **sazonalidade** e **movimento irregular** [^59].

*   **TendÃªncia:** Representa o movimento de longo prazo, seja ele ascendente ou descendente, dos dados de demanda [^59].
*   **Ciclo:** Refere-se a padrÃµes que ocorrem em intervalos de vÃ¡rios anos e geralmente sÃ£o influenciados por fatores econÃ´micos, polÃ­ticos ou sociais [^59].
*   **Sazonalidade:** Como jÃ¡ descrito, sÃ£o os padrÃµes que se repetem em intervalos regulares [^60].
*   **Movimento Irregular:** VariaÃ§Ãµes aleatÃ³rias nos dados que nÃ£o podem ser previstas [^60].

A sazonalidade Ã© expressa como um desvio entre os valores reais de demanda e a mÃ©dia da sÃ©rie [^74]. Este desvio pode ser modelado de duas formas principais: **aditiva** ou **multiplicativa** [^74].

*   **Modelos Aditivos:** Nestes modelos, um valor constante Ã© adicionado ou subtraÃ­do da mÃ©dia ou tendÃªncia para refletir o padrÃ£o sazonal [^74].
*   **Modelos Multiplicativos:** Nestes modelos, a sazonalidade Ã© expressa como uma porcentagem da mÃ©dia ou tendÃªncia [^74]. Os modelos multiplicativos sÃ£o os mais predominantes na Ã¡rea de negÃ³cios [^74]. Usam **Ã­ndices sazonais** para representar essa porcentagem da mÃ©dia ou tendÃªncia [^74].

Ã‰ importante tambÃ©m a distinÃ§Ã£o entre *deseasonalizar* os dados e *remover a sazonalidade*. A *deseasonalizaÃ§Ã£o* Ã© um processo onde o padrÃ£o sazonal Ã© retirado dos dados para que outros componentes (como tendÃªncia ou ciclo) possam ser identificados [^74]. *Remover a sazonalidade* Ã© um processo de ajuste de previsÃµes futuras por meio dos Ã­ndices sazonais [^74].

#### Ãndices Sazonais
Os **Ã­ndices sazonais** sÃ£o valores que expressam o impacto da sazonalidade em diferentes perÃ­odos do tempo [^74]. Em um modelo multiplicativo, um Ã­ndice sazonal, por exemplo, de 0,7 em novembro indicaria que a demanda naquele mÃªs seria de 70% da mÃ©dia [^74]. O conhecimento desses Ã­ndices Ã© essencial para ajustes de previsÃµes. A identificaÃ§Ã£o e quantificaÃ§Ã£o da sazonalidade tambÃ©m pode ajudar a identificar outros padrÃµes (como tendÃªncias ou ciclos) ou a ausÃªncia deles [^74].

> ğŸ’¡ **Exemplo NumÃ©rico:** Suponha que temos dados de vendas mensais de uma loja de brinquedos por trÃªs anos. Para calcular os Ã­ndices sazonais, primeiro calculamos a mÃ©dia de vendas para cada mÃªs ao longo dos trÃªs anos. Digamos que as mÃ©dias mensais sejam: Janeiro (100), Fevereiro (90), MarÃ§o (110), Abril (120), Maio (130), Junho (150), Julho (180), Agosto (200), Setembro (160), Outubro (140), Novembro (120), Dezembro (220). A mÃ©dia global de vendas Ã© a mÃ©dia de todas as mÃ©dias mensais: $\bar{x} = (100 + 90 + 110 + 120 + 130 + 150 + 180 + 200 + 160 + 140 + 120 + 220) / 12 = 143.33$. Os Ã­ndices sazonais sÃ£o entÃ£o calculados dividindo a mÃ©dia de cada mÃªs pela mÃ©dia global. Por exemplo, o Ã­ndice sazonal para Janeiro Ã© $100/143.33 = 0.698$, e para Dezembro Ã© $220/143.33 = 1.535$.

**ProposiÃ§Ã£o 1** A soma dos Ã­ndices sazonais em um ciclo completo de sazonalidade, quando calculados em relaÃ§Ã£o Ã  mÃ©dia global, Ã© igual ao nÃºmero de perÃ­odos no ciclo.
*Prova:* Seja $S$ o conjunto de Ã­ndices sazonais $s_i$ para um ciclo sazonal de $n$ perÃ­odos, onde $s_i = \frac{\bar{x}_i}{\bar{x}}$, onde $\bar{x}_i$ Ã© a mÃ©dia para o perÃ­odo $i$ e $\bar{x}$ Ã© a mÃ©dia global. A soma dos Ã­ndices sazonais Ã© dada por $\sum_{i=1}^{n} s_i = \sum_{i=1}^{n} \frac{\bar{x}_i}{\bar{x}}$. Como a mÃ©dia global $\bar{x}$ Ã© a mÃ©dia das mÃ©dias de cada perÃ­odo sazonal, temos que $\bar{x} = \frac{\sum_{i=1}^{n} \bar{x}_i}{n}$. Portanto, $\sum_{i=1}^{n} s_i = \frac{1}{\bar{x}}\sum_{i=1}^{n} \bar{x}_i =  \frac{n \bar{x}}{\bar{x}} = n$.
I.  Seja $S$ o conjunto de Ã­ndices sazonais $s_i$ para um ciclo sazonal de $n$ perÃ­odos.
II. Definimos cada Ã­ndice sazonal $s_i$ como a razÃ£o entre a mÃ©dia do perÃ­odo $i$, $\bar{x}_i$, e a mÃ©dia global $\bar{x}$, ou seja, $s_i = \frac{\bar{x}_i}{\bar{x}}$.
III. A soma de todos os Ã­ndices sazonais no ciclo Ã© dada por: $\sum_{i=1}^{n} s_i = \sum_{i=1}^{n} \frac{\bar{x}_i}{\bar{x}}$.
IV. A mÃ©dia global $\bar{x}$ Ã© calculada como a mÃ©dia das mÃ©dias de cada perÃ­odo sazonal, o que significa que $\bar{x} = \frac{\sum_{i=1}^{n} \bar{x}_i}{n}$.
V. Substituindo $\bar{x}$ em nossa expressÃ£o da soma de Ã­ndices sazonais, obtemos: $\sum_{i=1}^{n} s_i = \frac{1}{\bar{x}} \sum_{i=1}^{n} \bar{x}_i = \frac{\sum_{i=1}^{n} \bar{x}_i}{\frac{\sum_{i=1}^{n} \bar{x}_i}{n}}$.
VI. Simplificando a expressÃ£o, notamos que: $\sum_{i=1}^{n} s_i =  \frac{n \sum_{i=1}^{n} \bar{x}_i}{\sum_{i=1}^{n} \bar{x}_i} = n$.
VII. Portanto, a soma dos Ã­ndices sazonais Ã© igual ao nÃºmero de perÃ­odos $n$ no ciclo. â– 

> ğŸ’¡ **Exemplo NumÃ©rico:** Usando os Ã­ndices sazonais do exemplo anterior, a soma dos Ã­ndices deve ser igual a 12 (o nÃºmero de meses). Calculando a soma dos Ã­ndices: $0.698 + 0.628 + 0.767 + 0.837 + 0.907 + 1.046 + 1.256 + 1.395 + 1.116 + 0.977 + 0.837 + 1.535 = 12$. Isso ilustra a ProposiÃ§Ã£o 1.

#### Modelos de Ajuste Sazonal
O contexto apresentado sugere que as sÃ©ries temporais podem apresentar tanto sazonalidade quanto tendÃªncia, e que a forma de se modelar essas caracterÃ­sticas deve seguir as seguintes etapas, conforme descrito no contexto [^75]:
1. Calcular a mÃ©dia da demanda para cada perÃ­odo sazonal
2. Calcular a mÃ©dia global da demanda
3. Dividir a mÃ©dia de cada perÃ­odo sazonal pela mÃ©dia global para obter os Ã­ndices sazonais
4. Calcular a mÃ©dia da demanda para os prÃ³ximos perÃ­odos a serem previstos
5. Multiplicar as projeÃ§Ãµes de demanda pelos Ã­ndices sazonais

**Lema 1.1** Em um modelo aditivo, o valor observado $x_t$ no tempo $t$ pode ser expresso como a soma da tendÃªncia $T_t$, sazonalidade $S_t$ e um componente de erro $\epsilon_t$, ou seja, $x_t = T_t + S_t + \epsilon_t$.
*Prova:* Por definiÃ§Ã£o, em um modelo aditivo, os componentes da sÃ©rie temporal sÃ£o combinados por meio de adiÃ§Ã£o. A sazonalidade, neste caso, Ã© uma adiÃ§Ã£o (ou subtraÃ§Ã£o) de um valor constante em relaÃ§Ã£o Ã  tendÃªncia ou mÃ©dia da sÃ©rie. O componente de erro $\epsilon_t$ representa o ruÃ­do aleatÃ³rio. Portanto, o valor observado Ã© uma combinaÃ§Ã£o aditiva de tendÃªncia, sazonalidade e erro.
I. Em um modelo aditivo, a sazonalidade Ã© assumida como um desvio constante em relaÃ§Ã£o Ã  tendÃªncia.
II. O valor observado $x_t$ em um dado tempo $t$ Ã© composto pela tendÃªncia $T_t$, pela sazonalidade $S_t$ e um termo de erro $\epsilon_t$.
III. O modelo aditivo combina esses componentes somando-os, resultando em $x_t = T_t + S_t + \epsilon_t$.
IV.  Este modelo assume que a magnitude da sazonalidade Ã© independente do nÃ­vel da tendÃªncia.
V. Assim, demonstramos que em um modelo aditivo, os valores observados sÃ£o uma combinaÃ§Ã£o aditiva da tendÃªncia, da sazonalidade e do erro. â– 

> ğŸ’¡ **Exemplo NumÃ©rico:** Considere uma sÃ©rie temporal diÃ¡ria de vendas de sorvetes. Suponha que a tendÃªncia seja um aumento linear de 5 unidades por dia ($T_t = 5t$) e que o efeito sazonal diÃ¡rio seja de +10 unidades no domingo, +5 no sÃ¡bado e 0 nos outros dias da semana, ou seja $S_t$ igual a +10 para Domingo, +5 para SÃ¡bado e 0 para os demais dias. Um modelo aditivo poderia prever que a venda em um domingo, no dia 10, seria $x_{10} = 5 \times 10 + 10 + \epsilon_{10} = 60 + \epsilon_{10}$. Se o erro nesse dia for de -2 unidades, entÃ£o a venda seria de 58 unidades.

**Lema 1.2** Em um modelo multiplicativo, o valor observado $x_t$ no tempo $t$ pode ser expresso como o produto da tendÃªncia $T_t$, sazonalidade $S_t$ e um componente de erro $\epsilon_t$, ou seja, $x_t = T_t \times S_t \times \epsilon_t$.
*Prova:* Similarmente, em um modelo multiplicativo, os componentes sÃ£o combinados por meio de multiplicaÃ§Ã£o. A sazonalidade neste caso, Ã© um fator multiplicativo aplicado Ã  tendÃªncia. Novamente, o componente de erro $\epsilon_t$ representa o ruÃ­do aleatÃ³rio. Portanto, o valor observado Ã© uma combinaÃ§Ã£o multiplicativa de tendÃªncia, sazonalidade e erro.
I.  Em um modelo multiplicativo, a sazonalidade Ã© expressa como uma proporÃ§Ã£o da tendÃªncia.
II. O valor observado $x_t$ no tempo $t$ Ã© o resultado do produto da tendÃªncia $T_t$, da sazonalidade $S_t$ e um termo de erro $\epsilon_t$.
III. Formalmente, isso se expressa como: $x_t = T_t \times S_t \times \epsilon_t$.
IV. Este modelo assume que a magnitude da sazonalidade Ã© proporcional ao nÃ­vel da tendÃªncia.
V. Consequentemente, o modelo multiplicativo combina os componentes atravÃ©s de multiplicaÃ§Ã£o. â– 

> ğŸ’¡ **Exemplo NumÃ©rico:** Usando o exemplo do sorvete, suponha que a tendÃªncia Ã© $T_t = 5t$ e que o efeito sazonal seja um Ã­ndice sazonal de 1.2 no domingo, 1.1 no sÃ¡bado e 1 nos outros dias. Um modelo multiplicativo preveria que a venda em um domingo, no dia 10, seria $x_{10} = 5 \times 10 \times 1.2 \times \epsilon_{10} = 60 \times 1.2 \times \epsilon_{10} = 72 \times \epsilon_{10}$. Se $\epsilon_{10}$ fosse 0.95 (correspondente a um erro de 5%), a previsÃ£o seria $72 \times 0.95 = 68.4$ unidades.

#### TÃ©cnicas de DecomposiÃ§Ã£o de SÃ©ries Temporais
Para realizar previsÃµes mais precisas, o contexto apresentado indica a utilizaÃ§Ã£o de **RegressÃ£o por MÃ­nimos Quadrados** para decompor a sÃ©rie temporal em seus componentes [^75]. As etapas seriam [^75]:
1. Calcular o Ã­ndice sazonal para cada perÃ­odo
2. Remover a sazonalidade dividindo cada ponto de dados pelo seu Ã­ndice sazonal
3. Ajustar um modelo de regressÃ£o linear com os dados *deseasonalizados*
4. Utilizar a regressÃ£o para projetar valores futuros
5. Ajustar os valores previstos pela sazonalidade.

**Teorema 2** A regressÃ£o por mÃ­nimos quadrados pode ser utilizada para estimar a tendÃªncia e os componentes sazonais de uma sÃ©rie temporal.
*Prova:* A regressÃ£o por mÃ­nimos quadrados busca encontrar os parÃ¢metros de um modelo que minimizem a soma dos quadrados dos erros entre os valores observados e os valores previstos pelo modelo. Ao aplicar esta tÃ©cnica aos dados *deseasonalizados* (removendo, portanto, o componente sazonal) podemos estimar os parÃ¢metros da tendÃªncia, assumindo uma relaÃ§Ã£o linear entre a variÃ¡vel tempo e a sÃ©rie. O processo de *deseasonalizaÃ§Ã£o* Ã© feito dividindo os valores observados pelos indices sazonais previamente calculados. A combinaÃ§Ã£o do modelo de tendÃªncia com os Ã­ndices sazonais permite reconstruir a sÃ©rie temporal, separando seus componentes.
I. A regressÃ£o por mÃ­nimos quadrados (MQ) tem como objetivo minimizar a soma dos quadrados dos erros entre valores observados e previstos.
II. Para estimar a tendÃªncia e os componentes sazonais, primeiramente, removemos a sazonalidade dos dados atravÃ©s de *deseasonalizaÃ§Ã£o*, que envolve a divisÃ£o dos valores observados pelos Ã­ndices sazonais correspondentes.
III. A regressÃ£o por MQ Ã© entÃ£o aplicada aos dados *deseasonalizados* para estimar os parÃ¢metros do modelo de tendÃªncia. Assumimos que a tendÃªncia pode ser modelada por uma funÃ§Ã£o linear, cuja forma Ã©: $T_t = \beta_0 + \beta_1 t$
IV. Os parÃ¢metros $\beta_0$ e $\beta_1$ da tendÃªncia linear sÃ£o obtidos pelo mÃ©todo de mÃ­nimos quadrados, que minimiza a soma dos erros ao quadrado entre os valores *deseasonalizados* e a tendÃªncia prevista.
V. ApÃ³s a estimativa da tendÃªncia, a sazonalidade Ã© reintroduzida multiplicando-se a tendÃªncia estimada pelos Ã­ndices sazonais, permitindo assim a reconstruÃ§Ã£o da sÃ©rie temporal original, isolando cada componente.
VI. Assim, a regressÃ£o por mÃ­nimos quadrados pode estimar os componentes de tendÃªncia, e atravÃ©s da *deseasonalizaÃ§Ã£o* e posterior multiplicaÃ§Ã£o pelos indices sazonais, decompor e estimar os componentes sazonais da sÃ©rie temporal. â– 

> ğŸ’¡ **Exemplo NumÃ©rico:** Vamos supor que temos dados de vendas mensais para 3 anos e jÃ¡ calculamos os Ã­ndices sazonais para cada mÃªs (como no primeiro exemplo numÃ©rico). Agora, queremos usar a regressÃ£o para modelar a tendÃªncia depois de remover a sazonalidade. Suponha que os dados originais e os Ã­ndices sazonais para Janeiro do primeiro ano foram: venda observada (y) = 105, Ã­ndice sazonal (s) = 0.7. EntÃ£o, o valor *deseasonalizado* para janeiro Ã© $y/s= 105/0.7 = 150$. ApÃ³s aplicar o processo de *deseasonalizaÃ§Ã£o* a todos os pontos de dados, ajustamos um modelo de regressÃ£o linear aos dados *deseasonalizados* (valores de y/s). O resultado da regressÃ£o com o tempo 't' como variÃ¡vel independente pode ser: $T_t = 140 + 1.5t$, onde 140 Ã© o intercepto e 1.5 Ã© a inclinaÃ§Ã£o (aumento mÃ©dio mensal). Para prever as vendas para Janeiro do prÃ³ximo ano (t=37, pois sÃ£o 36 meses nos 3 anos anteriores), projetamos a tendÃªncia para o mÃªs de janeiro do prÃ³ximo ano, $T_{37} = 140 + 1.5 \times 37 = 195.5$. Finalmente, multiplicamos esta projeÃ§Ã£o pelo Ã­ndice sazonal de Janeiro (0.7) para ajustar a sazonalidade, obtendo $195.5 \times 0.7 = 136.85$ como previsÃ£o final.

**Teorema 2.1** O mÃ©todo de regressÃ£o por mÃ­nimos quadrados aplicado a sÃ©ries temporais com sazonalidade pode ser expandido para incluir variÃ¡veis explicativas adicionais que possam influenciar a tendÃªncia da sÃ©rie, melhorando a acurÃ¡cia da previsÃ£o.
*Prova:* A regressÃ£o por mÃ­nimos quadrados, por sua natureza, permite a inclusÃ£o de mÃºltiplas variÃ¡veis explicativas (regressores). AlÃ©m do tempo, que modela a tendÃªncia, podem ser adicionadas variÃ¡veis como indicadores econÃ´micos, variÃ¡veis climÃ¡ticas ou promoÃ§Ãµes. Ao incorporar essas variÃ¡veis ao modelo, podemos capturar melhor a dinÃ¢mica da sÃ©rie temporal e obter previsÃµes mais precisas. A metodologia de ajuste sazonal mantÃ©m-se a mesma, aplicando a regressÃ£o aos dados *deseasonalizados*.
I.  A regressÃ£o por mÃ­nimos quadrados (MQ) Ã© um mÃ©todo flexÃ­vel que permite a inclusÃ£o de mÃºltiplas variÃ¡veis explicativas ou regressores.
II. Em sÃ©ries temporais com sazonalidade, podemos expandir o modelo de regressÃ£o por MQ para incluir, alÃ©m do tempo (que representa a tendÃªncia), outras variÃ¡veis que possam impactar a sÃ©rie, como indicadores econÃ´micos ou variÃ¡veis climÃ¡ticas.
III. A inclusÃ£o dessas variÃ¡veis adicionais permite que o modelo capture mais da dinÃ¢mica subjacente dos dados, podendo ser expresso como: $T_t = \beta_0 + \beta_1 t + \sum_{j=1}^{k} \beta_{j+1} x_{jt}$, onde $x_{jt}$ sÃ£o as variÃ¡veis explicativas adicionais.
IV. A metodologia de ajuste sazonal, que envolve a remoÃ§Ã£o da sazonalidade atravÃ©s da divisÃ£o dos valores observados pelos Ã­ndices sazonais correspondentes antes de ajustar o modelo, se mantÃ©m inalterada.
V. Ao ajustar o modelo de regressÃ£o por MQ com mÃºltiplas variÃ¡veis, os parÃ¢metros sÃ£o estimados atravÃ©s da minimizaÃ§Ã£o da soma dos quadrados dos erros.
VI. Ao incorporar variÃ¡veis relevantes ao modelo, a acurÃ¡cia das previsÃµes tende a ser melhorada, pois se modela uma relaÃ§Ã£o mais complexa entre a sÃ©rie e seus fatores determinantes.
VII. Portanto, a regressÃ£o por mÃ­nimos quadrados, aplicada a sÃ©ries temporais com sazonalidade, pode ser expandida para incluir outras variÃ¡veis explicativas, resultando em modelos mais precisos. â– 

> ğŸ’¡ **Exemplo NumÃ©rico:** Retomando o exemplo das vendas mensais, suponha que descobrimos que a quantidade de anÃºncios feitos no mÃªs anterior afeta as vendas. EntÃ£o, a regressÃ£o para modelar a tendÃªncia poderia ser expandida para incluir os gastos com publicidade do mÃªs anterior (x), resultando em $T_t = \beta_0 + \beta_1 t + \beta_2 x_{t-1}$. Se o modelo de regressÃ£o com os dados *deseasonalizados* gerar os parÃ¢metros $\beta_0 = 100$, $\beta_1 = 1.2$, e $\beta_2 = 0.5$, entÃ£o a tendÃªncia para o mÃªs 37, com gastos de publicidade de 50 no mÃªs 36 seria: $T_{37} = 100 + 1.2 \times 37 + 0.5 \times 50 = 100 + 44.4 + 25 = 169.4$.  A previsÃ£o final, com o ajuste da sazonalidade, seria $169.4 \times 0.7 = 118.58$ para janeiro do prÃ³ximo ano, considerando o mesmo Ã­ndice sazonal do exemplo anterior (0.7). A inclusÃ£o da variÃ¡vel de publicidade resultou em um modelo mais preciso, que considera os gastos com publicidade na previsÃ£o das vendas.

### ConclusÃ£o

A sazonalidade Ã© um aspecto crucial das sÃ©ries temporais que deve ser considerado para realizar previsÃµes precisas. A compreensÃ£o de seus conceitos fundamentais e a aplicaÃ§Ã£o de tÃ©cnicas adequadas para sua identificaÃ§Ã£o, quantificaÃ§Ã£o e modelagem sÃ£o indispensÃ¡veis para decisÃµes eficazes. Os modelos multiplicativos, com Ã­ndices sazonais, oferecem uma abordagem prÃ¡tica para ajustar as previsÃµes e contabilizar as variaÃ§Ãµes regulares nos dados. AlÃ©m disso, a decomposiÃ§Ã£o de sÃ©ries temporais por meio de tÃ©cnicas como a regressÃ£o por mÃ­nimos quadrados permite identificar separadamente tendÃªncias, sazonalidade, ciclos e variaÃ§Ãµes aleatÃ³rias. Com este conhecimento, gestores podem otimizar o planejamento de recursos e a tomada de decisÃµes, maximizando resultados em cenÃ¡rios dinÃ¢micos.

### ReferÃªncias
[^5]: Chapter 3 - Forecasting Demand, p. 58
[^58]: Chapter 3 - Forecasting Demand, p. 59
[^59]: Chapter 3 - Forecasting Demand, p. 59
[^60]: Chapter 3 - Forecasting Demand, p. 60
[^74]: Chapter 3 - Forecasting Demand, p. 74
[^75]: Chapter 3 - Forecasting Demand, p. 75
<!-- END -->
